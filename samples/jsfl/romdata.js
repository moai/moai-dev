romJson={"package_uuid": "63d7f333-4eea-416b-9ecf-db13d80313c9", "directories": ["/moai"], "files": [{"filename": "/Moai - Lua - Export Library to GfxQuadDeck2D.jsfl", "start": 0, "end": 1557}, {"filename": "/Moai - Lua - Export to Flipbook.jsfl", "start": 1557, "end": 5277}, {"filename": "/Moai - Lua - Export to Sprite Deck.jsfl", "start": 5277, "end": 7272}, {"filename": "/Moai - Lua - Export to Tweened Anim.jsfl", "start": 7272, "end": 12847}, {"filename": "/Moai - Lua - Export.jsfl", "start": 12847, "end": 21499}, {"filename": "/Moai - Make Symbols.jsfl", "start": 21499, "end": 23731}, {"filename": "/Moai - Texture Atlas - Check Size.jsfl", "start": 23731, "end": 24256}, {"filename": "/Moai - Texture Atlas - Preview.jsfl", "start": 24256, "end": 24793}, {"filename": "/README.txt", "start": 24793, "end": 25239}, {"filename": "/moai/LuaTable.jsfl", "start": 25239, "end": 29275}, {"filename": "/moai/Settings.jsfl", "start": 29275, "end": 29600}, {"filename": "/moai/SpriteDeckBuilder.jsfl", "start": 29600, "end": 35390}, {"filename": "/moai/TextureAtlas.jsfl", "start": 35390, "end": 47567}]};
romData="Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCi8vIENvcHlyaWdodCAoYykgMjAxMC0yMDExIFppcGxpbmUgR2FtZXMsIEluYy4NCi8vIEFsbCBSaWdodHMgUmVzZXJ2ZWQuDQovLyBodHRwOi8vZ2V0bW9haS5jb20NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQoNCmZsLnJ1blNjcmlwdCAoIGZsLmNvbmZpZ1VSSSArICdDb21tYW5kcy9tb2FpL1NldHRpbmdzLmpzZmwnICk7DQpmbC5ydW5TY3JpcHQgKCBmbC5jb25maWdVUkkgKyAnQ29tbWFuZHMvbW9haS9MdWFUYWJsZS5qc2ZsJyApOw0KZmwucnVuU2NyaXB0ICggZmwuY29uZmlnVVJJICsgJ0NvbW1hbmRzL21vYWkvVGV4dHVyZUF0bGFzLmpzZmwnICk7DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBleHBvcnRHZnhRdWFkRGVjazJEICggcGFkZGluZywgZm9yY2VTcXVhcmUgKSB7DQogICANCiAgICB2YXIgZG9jdW1lbnQgPSBmbC5nZXREb2N1bWVudERPTSAoKTsNCiAgICB2YXIgZm9sZGVyUGF0aCA9IGZsLmJyb3dzZUZvckZvbGRlclVSTCAoICdTZWxlY3QgYSBmb2xkZXIuJyApICsgJy8nOw0KICAgIGlmICggISggZm9sZGVyUGF0aCAmJiAgZm9sZGVyUGF0aC5sZW5ndGggKSkgcmV0dXJuOw0KICAgDQogICAgdmFyIGx1YUZpbGVQYXRoID0gZm9sZGVyUGF0aCArIGRvY3VtZW50Lm5hbWUgKyAnLmx1YSc7DQogICAgdmFyIHBuZ0ZpbGVQYXRoID0gZm9sZGVyUGF0aCArIGRvY3VtZW50Lm5hbWUgKyAnLnBuZyc7DQogICANCiAgICB2YXIgYXRsYXMgPSBuZXcgVGV4dHVyZUF0bGFzICggcGFkZGluZywgZm9yY2VTcXVhcmUgKTsNCiAgICBhdGxhcy5jcmVhdGVUZXh0dXJlQXRsYXMgKCk7DQogICANCiAgICB2YXIgc3ltYm9sTGlicyA9IGF0bGFzLmNyZWF0ZUx1YUJydXNoRGVjaygpDQogICAgc3ltYm9sTGlicy5zZXQgKCAndGV4dHVyZScsIGRvY3VtZW50Lm5hbWUgKyAnLnBuZycgKTsNCiAgIA0KICAgIHZhciBsdWEgPSBzeW1ib2xMaWJzLnRvTHVhTG9jYWxUYWJsZSAoICdicnVzaERlY2snICk7DQogICAgbHVhICs9ICdcbic7DQogICAgbHVhICs9ICdyZXR1cm4gYnJ1c2hEZWNrXG4nOw0KICAgIGZsLnRyYWNlICggbHVhICk7DQogICANCiAgICBpZiAoICFGTGZpbGUud3JpdGUgKCBsdWFGaWxlUGF0aCwgbHVhICkpIHsNCiAgICAgICAgYWxlcnQoICJFcnJvciBzYXZpbmcgZmlsZSIgKTsNCiAgICB9DQogICANCiAgICBhdGxhc0RvYyA9IGF0bGFzLmNyZWF0ZVRleHR1cmVBdGxhc0RvYyAoKTsNCiAgICBhdGxhc0RvYy5leHBvcnRQTkcgKCBwbmdGaWxlUGF0aCwgdHJ1ZSwgdHJ1ZSApOw0KICAgIGZsLmNsb3NlRG9jdW1lbnQgKCBhdGxhc0RvYywgZmFsc2UgKTsNCn0NCiAgIA0KZXhwb3J0R2Z4UXVhZERlY2syRCAoIE1PQUlfVEVYVFVSRV9BVExBU19QQURESU5HLCBNT0FJX1RFWFRVUkVfQVRMQVNfRk9SQ0VfU1FVQVJFICk777u/Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCi8vIENvcHlyaWdodCAoYykgMjAxMC0yMDExIFppcGxpbmUgR2FtZXMsIEluYy4gDQovLyBBbGwgUmlnaHRzIFJlc2VydmVkLiANCi8vIGh0dHA6Ly9nZXRtb2FpLmNvbQ0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCg0KZmwucnVuU2NyaXB0ICggZmwuY29uZmlnVVJJICsgJ0NvbW1hbmRzL21vYWkvU2V0dGluZ3MuanNmbCcgKTsNCmZsLnJ1blNjcmlwdCAoIGZsLmNvbmZpZ1VSSSArICdDb21tYW5kcy9tb2FpL0x1YVRhYmxlLmpzZmwnICk7DQpmbC5ydW5TY3JpcHQgKCBmbC5jb25maWdVUkkgKyAnQ29tbWFuZHMvbW9haS9UZXh0dXJlQXRsYXMuanNmbCcgKTsNCmZsLnJ1blNjcmlwdCAoIGZsLmNvbmZpZ1VSSSArICdDb21tYW5kcy9tb2FpL1Nwcml0ZURlY2tCdWlsZGVyLmpzZmwnICk7DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBleHBvcnRUb0x1YSAoIHBhZGRpbmcsIGZvcmNlU3F1YXJlICkgew0KCQ0KCXZhciBkb2N1bWVudCA9IGZsLmdldERvY3VtZW50RE9NICgpOw0KCXZhciBmb2xkZXJQYXRoID0gZmwuYnJvd3NlRm9yRm9sZGVyVVJMICggJ1NlbGVjdCBhIGZvbGRlci4nICkgKyAnLyc7DQoJDQoJaWYgKCBmb2xkZXJQYXRoICYmICAoIGZvbGRlclBhdGgubGVuZ3RoID4gNSApKSB7DQoJCQ0KCQl2YXIgdGltZWxpbmUgPSBkb2N1bWVudC5nZXRUaW1lbGluZSAoKTsNCgkJdmFyIGtleWZyYW1lcyA9IGdldEtleWZyYW1lTGlzdCAoIHRpbWVsaW5lICk7DQoJCQ0KCQl2YXIgYXRsYXMgPSBuZXcgVGV4dHVyZUF0bGFzICggcGFkZGluZywgZm9yY2VTcXVhcmUgKTsNCgkJYXRsYXMuY3JlYXRlVGV4dHVyZUF0bGFzICgpOw0KCQkNCgkJdmFyIHNwcml0ZURlY2tCdWlsZGVyID0gbmV3IFNwcml0ZURlY2tCdWlsZGVyICgpOw0KCQkNCgkJdmFyIGx1YSA9IG5ldyBMdWFUYWJsZSAoKTsNCgkJDQoJCWx1YS5zZXQgKCAndGV4dHVyZScsIGRvY3VtZW50Lm5hbWUgKyAnLnBuZycgKTsNCgkJbHVhLnNldCAoICdmcHMnLCBkb2N1bWVudC5mcmFtZVJhdGUgKTsNCgkJbHVhLnNldCAoICd3aWR0aCcsIGRvY3VtZW50LndpZHRoICk7DQoJCWx1YS5zZXQgKCAnaGVpZ2h0JywgZG9jdW1lbnQuaGVpZ2h0ICk7DQoJCWx1YS5zZXQgKCAnc3ByaXRlRGVjaycsIHNwcml0ZURlY2tCdWlsZGVyLnNwcml0ZURlY2sgKTsNCgkJbHVhLnNldCAoICduYW1lJywgdGltZWxpbmUubmFtZSApOw0KCQlsdWEuc2V0ICggJ2xlbmd0aCcsIHRpbWVsaW5lLmZyYW1lQ291bnQgKTsNCgkJDQoJCXZhciBsdWFGcmFtZXMgPSBsdWEuc2V0VGFibGUgKCAnZnJhbWVzJyApOw0KCQkNCgkJZm9yICggdmFyIGkgPSAwOyBpIDwga2V5ZnJhbWVzLmxlbmd0aDsgKytpICkgew0KCQkJdmFyIGtleWZyYW1lID0ga2V5ZnJhbWVzIFsgaSBdOw0KCQkJDQoJCQl2YXIgbHVhRnJhbWUgPSBsdWFGcmFtZXMucHVzaFRhYmxlICgpOw0KCQ0KCQkJbHVhRnJhbWUuc2V0ICggJ3N0YXJ0Jywga2V5ZnJhbWUuaWR4ICk7DQoJCQkNCgkJCWlmICgga2V5ZnJhbWUubkVsZW1lbnRzICkgew0KCQkJCXZhciBpZCA9IHNwcml0ZURlY2tCdWlsZGVyLmFkZFNwcml0ZUZvckZyYW1lSWR4ICggZG9jdW1lbnQsIHRpbWVsaW5lLCBhdGxhcywga2V5ZnJhbWUuaWR4ICk7DQoJCQkJbHVhRnJhbWUuc2V0ICggJ2lkJywgaWQgKyAxICk7DQoJCQl9DQoJCQllbHNlIHsNCgkJCQlsdWFGcmFtZS5zZXQgKCAnaWQnLCAtMSApOw0KCQkJfQ0KCQl9DQoJCQ0KCQl2YXIgc3RyaW5nID0gbHVhLnRvTHVhTG9jYWxUYWJsZSAoICdhbmltJyApOw0KCQlzdHJpbmcgKz0gJ1xuJzsNCgkJc3RyaW5nICs9ICdyZXR1cm4gYW5pbVxuJzsNCgkJZmwudHJhY2UgKCBzdHJpbmcgKTsNCgkJDQoJCXZhciBsdWFGaWxlUGF0aCA9IGZvbGRlclBhdGggKyBkb2N1bWVudC5uYW1lICsgJy5sdWEnOw0KCQlpZiAoICFGTGZpbGUud3JpdGUgKCBsdWFGaWxlUGF0aCwgc3RyaW5nICkpIHsNCgkJCWFsZXJ0KCAiRXJyb3Igc2F2aW5nIGZpbGUiICk7IA0KCQl9DQoJCQ0KCQl2YXIgcG5nRmlsZVBhdGggPSBmb2xkZXJQYXRoICsgZG9jdW1lbnQubmFtZSArICcucG5nJzsNCgkJYXRsYXNEb2MgPSBhdGxhcy5jcmVhdGVUZXh0dXJlQXRsYXNEb2MgKCk7DQoJCWF0bGFzRG9jLmV4cG9ydFBORyAoIHBuZ0ZpbGVQYXRoLCB0cnVlLCB0cnVlICk7DQoJCWZsLmNsb3NlRG9jdW1lbnQgKCBhdGxhc0RvYywgZmFsc2UgKTsNCgl9DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBnZXRLZXlmcmFtZUxpc3QgKCB0aW1lbGluZSApIHsNCgkNCgl2YXIga2V5ZnJhbWVzID0gbmV3IEFycmF5ICgpOw0KCQ0KCXZhciBpID0gMDsNCgl2YXIgbGFzdEZyYW1lID0gdGltZWxpbmUuZnJhbWVDb3VudCAtIDE7DQoJZm9yICggOyBpIDwgdGltZWxpbmUuZnJhbWVDb3VudDsgKytpICkgew0KCQkNCgkJdmFyIGlzS2V5ZnJhbWUgPSBmYWxzZTsNCgkJdmFyIG5FbGVtZW50cyA9IDA7DQoJCQ0KCQl2YXIgbGF5ZXJzID0gdGltZWxpbmUubGF5ZXJzOw0KCQlmb3IgKCB2YXIgaiA9IDA7IGogPCB0aW1lbGluZS5sYXllcnMubGVuZ3RoOyArK2ogKSB7DQoJCQl2YXIgbGF5ZXIgPSBsYXllcnMgWyBqIF07DQoJCQkNCgkJCXZhciBmcmFtZSA9IGxheWVyLmZyYW1lcyBbIGkgXTsNCgkJCWlmICggIWZyYW1lICkgY29udGludWU7DQoJCQkNCgkJCW5FbGVtZW50cyArPSBmcmFtZS5lbGVtZW50cy5sZW5ndGg7DQoJCQkNCgkJCWlmICggZnJhbWUuc3RhcnRGcmFtZSA9PSBpICkgew0KCQkJCWlzS2V5ZnJhbWUgPSB0cnVlOw0KCQkJfQ0KCQl9DQoJCQ0KCQlpZiAoIGlzS2V5ZnJhbWUgIHx8ICggaSA9PSBsYXN0RnJhbWUgKSkgew0KCQkJdmFyIGtleWZyYW1lID0ge307DQoJCQlrZXlmcmFtZS5pZHggPSBpOw0KCQkJa2V5ZnJhbWUubkVsZW1lbnRzID0gbkVsZW1lbnRzOw0KCQkJa2V5ZnJhbWVzLnB1c2ggKCBrZXlmcmFtZSApOw0KCQl9DQoJfQ0KCXJldHVybiBrZXlmcmFtZXM7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBpc0tleWZyYW1lICggdGltZWxpbmUsIGZyYW1lSWR4ICkgew0KCQ0KCXZhciBsYXllcnMgPSB0aW1lbGluZS5sYXllcnM7DQoJZm9yICggdmFyIGkgPSAwOyBpIDwgdGltZWxpbmUubGF5ZXJzLmxlbmd0aDsgKytpICkgew0KCQl2YXIgbGF5ZXIgPSBsYXllcnMgWyBpIF07DQoJCQ0KCQl2YXIgZnJhbWVzID0gbGF5ZXIuZnJhbWVzOw0KCQlpZiAoIGZyYW1lSWR4ID49IGZyYW1lcy5sZW5ndGggKSBjb250aW51ZTsNCgkJDQoJCXZhciBmcmFtZSA9IGxheWVyLmZyYW1lcyBbIGZyYW1lSWR4IF07DQoJCQ0KCQlpZiAoICFmcmFtZSApIGNvbnRpbnVlOw0KCQlpZiAoIGZyYW1lLnN0YXJ0RnJhbWUgIT0gaSApIGNvbnRpbnVlOw0KCQkNCgkJcmV0dXJuIHRydWU7DQoJfQ0KCXJldHVybiBmYWxzZTsNCn0NCg0KZXhwb3J0VG9MdWEgKCBNT0FJX1RFWFRVUkVfQVRMQVNfUEFERElORywgTU9BSV9URVhUVVJFX0FUTEFTX0ZPUkNFX1NRVUFSRSApOw0K77u/Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCi8vIENvcHlyaWdodCAoYykgMjAxMC0yMDExIFppcGxpbmUgR2FtZXMsIEluYy4gDQovLyBBbGwgUmlnaHRzIFJlc2VydmVkLiANCi8vIGh0dHA6Ly9nZXRtb2FpLmNvbQ0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCg0KZmwucnVuU2NyaXB0ICggZmwuY29uZmlnVVJJICsgJ0NvbW1hbmRzL21vYWkvU2V0dGluZ3MuanNmbCcgKTsNCmZsLnJ1blNjcmlwdCAoIGZsLmNvbmZpZ1VSSSArICdDb21tYW5kcy9tb2FpL0x1YVRhYmxlLmpzZmwnICk7DQpmbC5ydW5TY3JpcHQgKCBmbC5jb25maWdVUkkgKyAnQ29tbWFuZHMvbW9haS9UZXh0dXJlQXRsYXMuanNmbCcgKTsNCmZsLnJ1blNjcmlwdCAoIGZsLmNvbmZpZ1VSSSArICdDb21tYW5kcy9tb2FpL1Nwcml0ZURlY2tCdWlsZGVyLmpzZmwnICk7DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBleHBvcnRTcHJpdGVMaWJyYXJ5ICggcGFkZGluZywgZm9yY2VTcXVhcmUgKSB7DQoJDQoJdmFyIGRvY3VtZW50ID0gZmwuZ2V0RG9jdW1lbnRET00gKCk7DQoJdmFyIGZvbGRlclBhdGggPSBmbC5icm93c2VGb3JGb2xkZXJVUkwgKCAnU2VsZWN0IGEgZm9sZGVyLicgKSArICcvJzsNCglpZiAoICEoIGZvbGRlclBhdGggJiYgIGZvbGRlclBhdGgubGVuZ3RoICkpIHJldHVybjsNCgkNCgl2YXIgbHVhRmlsZVBhdGggPSBmb2xkZXJQYXRoICsgZG9jdW1lbnQubmFtZSArICcubHVhJzsNCgl2YXIgcG5nRmlsZVBhdGggPSBmb2xkZXJQYXRoICsgZG9jdW1lbnQubmFtZSArICcucG5nJzsNCgkNCgl2YXIgYXRsYXMgPSBuZXcgVGV4dHVyZUF0bGFzICggcGFkZGluZywgZm9yY2VTcXVhcmUgKTsNCglhdGxhcy5jcmVhdGVUZXh0dXJlQXRsYXMgKCk7DQoJDQoJdmFyIHNwcml0ZUxpYnMgPSBuZXcgTHVhVGFibGUgKCk7DQoJc3ByaXRlTGlicy5zZXQgKCAndGV4dHVyZScsIGRvY3VtZW50Lm5hbWUgKyAnLnBuZycgKTsNCgkNCgl2YXIgdGltZWxpbmVzID0gZG9jdW1lbnQudGltZWxpbmVzOw0KCWZvciAoIHZhciBpID0gMDsgaSA8IHRpbWVsaW5lcy5sZW5ndGg7ICsraSApIHsNCgkJdmFyIHRpbWVsaW5lID0gdGltZWxpbmVzIFsgaSBdOw0KCQl2YXIgbGF5ZXJzID0gdGltZWxpbmUubGF5ZXJzOw0KCQkNCgkJdmFyIHNwcml0ZURlY2tCdWlsZGVyID0gbmV3IFNwcml0ZURlY2tCdWlsZGVyICgpOw0KCQlzcHJpdGVMaWJzLnB1c2ggKCBzcHJpdGVEZWNrQnVpbGRlci5zcHJpdGVEZWNrICk7DQoJCQ0KCQlmb3IgKCB2YXIgZnJhbWVJZHggPSAwOyBmcmFtZUlkeCA8IHRpbWVsaW5lLmZyYW1lQ291bnQ7ICsrZnJhbWVJZHggKSB7DQoJCQlzcHJpdGVEZWNrQnVpbGRlci5hZGRTcHJpdGVGb3JGcmFtZUlkeCAoIGRvY3VtZW50LCB0aW1lbGluZSwgYXRsYXMsIGZyYW1lSWR4ICk7DQoJCX0NCgl9DQoJDQoJdmFyIGx1YSA9IHNwcml0ZUxpYnMudG9MdWFMb2NhbFRhYmxlICggJ3Nwcml0ZURlY2tzJyApOw0KCWx1YSArPSAnXG4nOw0KCWx1YSArPSAncmV0dXJuIHNwcml0ZURlY2tzXG4nOw0KCWZsLnRyYWNlICggbHVhICk7DQoJDQoJaWYgKCAhRkxmaWxlLndyaXRlICggbHVhRmlsZVBhdGgsIGx1YSApKSB7DQoJCWFsZXJ0KCAiRXJyb3Igc2F2aW5nIGZpbGUiICk7IA0KCX0NCgkNCglhdGxhc0RvYyA9IGF0bGFzLmNyZWF0ZVRleHR1cmVBdGxhc0RvYyAoKTsNCglhdGxhc0RvYy5leHBvcnRQTkcgKCBwbmdGaWxlUGF0aCwgdHJ1ZSwgdHJ1ZSApOw0KCWZsLmNsb3NlRG9jdW1lbnQgKCBhdGxhc0RvYywgZmFsc2UgKTsNCn0NCgkNCmV4cG9ydFNwcml0ZUxpYnJhcnkgKCBNT0FJX1RFWFRVUkVfQVRMQVNfUEFERElORywgTU9BSV9URVhUVVJFX0FUTEFTX0ZPUkNFX1NRVUFSRSApOw0K77u/Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCi8vIENvcHlyaWdodCAoYykgMjAxMC0yMDExIFppcGxpbmUgR2FtZXMsIEluYy4gDQovLyBBbGwgUmlnaHRzIFJlc2VydmVkLiANCi8vIGh0dHA6Ly9nZXRtb2FpLmNvbQ0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCg0KZmwucnVuU2NyaXB0ICggZmwuY29uZmlnVVJJICsgJ0NvbW1hbmRzL21vYWkvU2V0dGluZ3MuanNmbCcgKTsNCmZsLnJ1blNjcmlwdCAoIGZsLmNvbmZpZ1VSSSArICdDb21tYW5kcy9tb2FpL0x1YVRhYmxlLmpzZmwnICk7DQpmbC5ydW5TY3JpcHQgKCBmbC5jb25maWdVUkkgKyAnQ29tbWFuZHMvbW9haS9UZXh0dXJlQXRsYXMuanNmbCcgKTsNCmZsLnJ1blNjcmlwdCAoIGZsLmNvbmZpZ1VSSSArICdDb21tYW5kcy9tb2FpL1Nwcml0ZURlY2tCdWlsZGVyLmpzZmwnICk7DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBleHBvcnRUb0x1YSAoIHBhZGRpbmcsIGZvcmNlU3F1YXJlICkgew0KCQ0KCXZhciBkb2N1bWVudCA9IGZsLmdldERvY3VtZW50RE9NICgpOw0KCXZhciBmb2xkZXJQYXRoID0gZmwuYnJvd3NlRm9yRm9sZGVyVVJMICggJ1NlbGVjdCBhIGZvbGRlci4nICkgKyAnLyc7DQoJDQoJaWYgKCBmb2xkZXJQYXRoICYmICBmb2xkZXJQYXRoLmxlbmd0aCApIHsNCgkJDQoJCXZhciBhdGxhcyA9IG5ldyBUZXh0dXJlQXRsYXMgKCBwYWRkaW5nLCBmb3JjZVNxdWFyZSApOw0KCQlhdGxhcy5jcmVhdGVUZXh0dXJlQXRsYXMgKCk7DQoJCQ0KCQl2YXIgbHVhID0gbmV3IEx1YVRhYmxlICgpOw0KCQkNCgkJbHVhLnNldCAoICd0ZXh0dXJlJywgZG9jdW1lbnQubmFtZSArICcucG5nJyApOw0KCQlsdWEuc2V0ICggJ2ZwcycsIGRvY3VtZW50LmZyYW1lUmF0ZSApOw0KCQlsdWEuc2V0ICggJ3dpZHRoJywgZG9jdW1lbnQud2lkdGggKTsNCgkJbHVhLnNldCAoICdoZWlnaHQnLCBkb2N1bWVudC5oZWlnaHQgKTsNCgkJDQoJCWx1YS5zZXQgKCAnYnJ1c2hEZWNrJywgYXRsYXMuY3JlYXRlTHVhQnJ1c2hEZWNrICgpKTsNCgkJDQoJCXZhciB0aW1lbGluZSA9IGRvY3VtZW50LmdldFRpbWVsaW5lICgpOw0KCQlsdWEuc2V0ICggJ3RpbWVsaW5lJywgZ2V0VGltZWxpbmVMdWEgKCBhdGxhcywgdGltZWxpbmUgKSk7DQoJCQ0KCQl2YXIgc3RyaW5nID0gbHVhLnRvTHVhTG9jYWxUYWJsZSAoICdhbmltJyApOw0KCQlzdHJpbmcgKz0gJ1xuJzsNCgkJc3RyaW5nICs9ICdyZXR1cm4gYW5pbVxuJzsNCgkJZmwudHJhY2UgKCBzdHJpbmcgKTsNCgkJDQoJCXZhciBsdWFGaWxlUGF0aCA9IGZvbGRlclBhdGggKyBkb2N1bWVudC5uYW1lICsgJy5sdWEnOw0KCQlpZiAoICFGTGZpbGUud3JpdGUgKCBsdWFGaWxlUGF0aCwgc3RyaW5nICkpIHsNCgkJCWFsZXJ0KCAiRXJyb3Igc2F2aW5nIGZpbGUiICk7IA0KCQl9DQoJCQ0KCQl2YXIgcG5nRmlsZVBhdGggPSBmb2xkZXJQYXRoICsgZG9jdW1lbnQubmFtZSArICcucG5nJzsNCgkJYXRsYXNEb2MgPSBhdGxhcy5jcmVhdGVUZXh0dXJlQXRsYXNEb2MgKCk7DQoJCWF0bGFzRG9jLmV4cG9ydFBORyAoIHBuZ0ZpbGVQYXRoLCB0cnVlLCB0cnVlICk7DQoJCWZsLmNsb3NlRG9jdW1lbnQgKCBhdGxhc0RvYywgZmFsc2UgKTsNCgl9DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBnZXRFYXNlQ3VydmVMdWEgKCBjdXJ2ZSwgbmFtZSApIHsNCgkNCgl2YXIgbHVhID0gbmV3IEx1YVRhYmxlICgpOw0KCQ0KCWZvciAoIHZhciBpID0gMDsgaSA8IGN1cnZlLmxlbmd0aDsgaSsrICkgew0KCQl2YXIgcG9pbnQgPSBjdXJ2ZSBbIGkgXTsNCgkJDQoJCXZhciBsdWFQb2ludCA9IGx1YS5wdXNoVGFibGUgKCk7DQoJCQ0KCQlsdWFQb2ludC5zZXQgKCAneCcsIHBvaW50LnggKTsNCgkJbHVhUG9pbnQuc2V0ICggJ3knLCBwb2ludC55ICk7DQoJfQ0KCXJldHVybiBsdWE7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBnZXRFbGVtZW50THVhICggZWxlbWVudCwgaWR4ICkgew0KDQoJdmFyIGx1YSA9IG5ldyBMdWFUYWJsZSAoKTsNCgkNCgl2YXIgaXRlbSA9IGVsZW1lbnQubGlicmFyeUl0ZW07DQoJaWYgKCBpdGVtICkgew0KCQlsdWEuc2V0ICggJ25hbWUnLCBpdGVtLm5hbWUgKTsNCgl9DQoJDQoJbHVhLnNldCAoICd4JywgZWxlbWVudC54ICk7DQoJbHVhLnNldCAoICd5JywgZWxlbWVudC55ICk7DQoJbHVhLnNldCAoICdyJywgZWxlbWVudC5yb3RhdGlvbiApOw0KCWx1YS5zZXQgKCAnc3gnLCBlbGVtZW50LnNjYWxlWCApOw0KCWx1YS5zZXQgKCAnc3knLCBlbGVtZW50LnNjYWxlWSApOw0KCQ0KCXJldHVybiBsdWE7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBnZXRGcmFtZUx1YSAoIGF0bGFzLCBmcmFtZSwgaWR4LCBzdGFydElkeCApIHsNCgkNCgl2YXIgbHVhID0gbmV3IEx1YVRhYmxlICgpOw0KCQ0KCWx1YS5zZXQgKCAnc3RhcnQnLCBzdGFydElkeCApOw0KCWx1YS5zZXQgKCAnbGVuZ3RoJywgZnJhbWUuZHVyYXRpb24gKTsNCgkNCgkvLyB3ZSBvbmx5IGNhcmUgYWJvdXQgdGhlIGZpcnN0IGVsZW1lbnQNCgl2YXIgZWxlbWVudDsNCglpZiAoIGZyYW1lLmVsZW1lbnRzLmxlbmd0aCApIHsNCgkJZWxlbWVudCA9IGZyYW1lLmVsZW1lbnRzIFsgMCBdOw0KCX0NCgkNCglpZiAoIGVsZW1lbnQgJiYgZWxlbWVudC5saWJyYXJ5SXRlbSApIHsNCgkNCgkJdmFyIGVudHJ5ID0gYXRsYXMubWFwIFsgZWxlbWVudC5saWJyYXJ5SXRlbS5uYW1lIF07DQoJCWlmICggIWVudHJ5ICkgcmV0dXJuOw0KCQkNCgkJbHVhLnNldCAoICdpZCcsIGVudHJ5LmlkeCArIDEgKTsNCgkJDQoJCXZhciB0cmFuc2Zvcm0gPSBsdWEuc2V0VGFibGUgKCAndHJhbnNmb3JtJyApOw0KCQ0KCQl0cmFuc2Zvcm0uc2V0ICggJ3gnLCBlbGVtZW50LnggKTsNCgkJdHJhbnNmb3JtLnNldCAoICd5JywgZWxlbWVudC55ICk7DQoJCXRyYW5zZm9ybS5zZXQgKCAncicsIGVsZW1lbnQucm90YXRpb24gKTsNCgkJdHJhbnNmb3JtLnNldCAoICdzeCcsIGVsZW1lbnQuc2NhbGVYICk7DQoJCXRyYW5zZm9ybS5zZXQgKCAnc3knLCBlbGVtZW50LnNjYWxlWSApOw0KCQkNCgkJLy8gZWFzZQ0KCQlpZiAoIGZyYW1lLmhhc0N1c3RvbUVhc2UgKSB7DQoJCQlpZiAoIGZyYW1lLnVzZVNpbmdsZUVhc2VDdXJ2ZSApIHsNCgkJCQl2YXIgZWFzZUN1cnZlID0gZ2V0RWFzZUN1cnZlTHVhICggZnJhbWUuZ2V0Q3VzdG9tRWFzZSAoKSwgJ2Vhc2VDdXJ2ZScgKTsNCgkJCQlsdWEuc2V0ICggJ2Vhc2VDdXJ2ZScsIGVhc2VDdXJ2ZSApOw0KCQkJfQ0KCQkJZWxzZSB7DQoJCQkJdmFyIGVhc2VDdXJ2ZXMgPSBsdWEuc2V0VGFibGUgKCAnZWFzZUN1cnZlcycgKTsNCgkJCQkNCgkJCQllYXNlQ3VydmVzLnB1c2ggKCBnZXRFYXNlQ3VydmVMdWEgKCBmcmFtZS5nZXRDdXN0b21FYXNlICggJ3Bvc2l0aW9uJyApLCAncG9zaXRpb24nICkpOw0KCQkJCWVhc2VDdXJ2ZXMucHVzaCAoIGdldEVhc2VDdXJ2ZUx1YSAoIGZyYW1lLmdldEN1c3RvbUVhc2UgKCAncm90YXRpb24nICksICdyb3RhdGlvbicgKSk7DQoJCQkJZWFzZUN1cnZlcy5wdXNoICggZ2V0RWFzZUN1cnZlTHVhICggZnJhbWUuZ2V0Q3VzdG9tRWFzZSAoICdzY2FsZScgKSwgJ3NjYWxlJyApKTsNCgkJCQllYXNlQ3VydmVzLnB1c2ggKCBnZXRFYXNlQ3VydmVMdWEgKCBmcmFtZS5nZXRDdXN0b21FYXNlICggJ2NvbG9yJyApLCAnY29sb3InICkpOw0KCQkJfQ0KCQl9DQoJCWVsc2Ugew0KCQkJbHVhLnNldCAoICdlYXNlJywgZnJhbWUudHdlZW5FYXNpbmcgKTsNCgkJfQ0KCX0NCgllbHNlIHsNCgkJbHVhLnNldCAoICdpZCcsIC0xICk7DQoJfQ0KDQoJcmV0dXJuIGx1YTsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCmZ1bmN0aW9uIGdldExheWVyTHVhICggYXRsYXMsIGxheWVyLCBpZHggKSB7DQoNCgl2YXIgbHVhID0gbmV3IEx1YVRhYmxlICgpOw0KCQ0KCWx1YS5zZXQgKCAnbmFtZScsIGxheWVyLm5hbWUgKTsNCglsdWEuc2V0ICggJ2xlbmd0aCcsIGxheWVyLmZyYW1lcy5sZW5ndGggKTsNCgkNCgl2YXIgZnJhbWVzID0gbHVhLnNldFRhYmxlICggJ2ZyYW1lcycgKTsNCgkNCgl2YXIgaWR4ID0gMTsNCglmb3IgKCB2YXIgaSA9IDA7IGkgPCBsYXllci5mcmFtZXMubGVuZ3RoOyArK2kgKSB7DQoJCWZyYW1lID0gbGF5ZXIuZnJhbWVzIFsgaSBdOw0KCQkNCgkJLy8gc2tpcCBub24ta2V5ZnJhbWVzDQoJCWlmICggZnJhbWUuc3RhcnRGcmFtZSAhPSBpICkgY29udGludWU7DQoJCQ0KCQl2YXIgZnJhbWVMdWEgPSBnZXRGcmFtZUx1YSAoIGF0bGFzLCBmcmFtZSwgaWR4KyssIGkgKTsNCgkJaWYgKCBmcmFtZUx1YSApIHsNCgkJCWZyYW1lcy5wdXNoICggZ2V0RnJhbWVMdWEgKCBhdGxhcywgZnJhbWUsIGlkeCsrLCBpICkpOw0KCQl9DQoJfQ0KCXJldHVybiBsdWE7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBnZXRUaW1lbGluZUx1YSAoIGF0bGFzLCB0aW1lbGluZSApIHsNCgkNCgl2YXIgbHVhID0gbmV3IEx1YVRhYmxlICgpOw0KCQ0KCWx1YS5zZXQgKCAnbmFtZScsIHRpbWVsaW5lLm5hbWUgKTsNCglsdWEuc2V0ICggJ2xlbmd0aCcsIHRpbWVsaW5lLmZyYW1lQ291bnQgKTsNCgkNCgl2YXIgbGF5ZXJzID0gbHVhLnNldFRhYmxlICggJ2xheWVycycgKTsNCgkNCglmb3IgKCB2YXIgaSA9IDA7IGkgPCB0aW1lbGluZS5sYXllcnMubGVuZ3RoOyArK2kgKSB7DQoJCWxheWVyID0gdGltZWxpbmUubGF5ZXJzIFsgdGltZWxpbmUubGF5ZXJzLmxlbmd0aCAtIGkgLSAxIF07DQoJCQ0KCQlpZiAoIGxheWVyLmxheWVyVHlwZSAhPSAnbm9ybWFsJyApIGNvbnRpbnVlOw0KCQlsYXllcnMucHVzaCAoIGdldExheWVyTHVhICggYXRsYXMsIGxheWVyLCBpICsgMSApKTsNCgl9DQoJcmV0dXJuIGx1YTsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCmZ1bmN0aW9uIHJlZmxlY3QgKCBvYmpOYW1lLCBvYmogKSB7DQoJDQoJZmwudHJhY2UgKCBvYmpOYW1lICk7DQoJDQoJZm9yICggdmFyIG1lbWJlciBpbiBvYmogKXsNCgkJZmwudHJhY2UgKCAnXHQnICsgbWVtYmVyICsgJzogJyArIG9iaiBbIG1lbWJlciBdKTsNCgl9DQoJZmwudHJhY2UgKCAnXG4nICk7DQp9DQoNCmV4cG9ydFRvTHVhICggTU9BSV9URVhUVVJFX0FUTEFTX1BBRERJTkcsIE1PQUlfVEVYVFVSRV9BVExBU19GT1JDRV9TUVVBUkUgKTsNCu+7vy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQovLyBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxMSBaaXBsaW5lIEdhbWVzLCBJbmMuIA0KLy8gQWxsIFJpZ2h0cyBSZXNlcnZlZC4gDQovLyBodHRwOi8vZ2V0bW9haS5jb20NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQovKg0KZnVuY3Rpb24gbG9hZENvbW1hbmRTY3JpcHQgKCBzY3JpcHQgKSB7DQoJZmwucnVuU2NyaXB0KCBmbC5jb25maWdVUkkgKyAnQ29tbWFuZHMvJyArIHNjcmlwdCApOyANCn0NCg0KbG9hZENvbW1hbmRTY3JpcHQgKCAnbW9haS9hc3NlcnQuanNmbCcgKTsNCmxvYWRDb21tYW5kU2NyaXB0ICggJ21vYWkvZG9tLmpzZmwnICk7DQpsb2FkQ29tbWFuZFNjcmlwdCAoICdtb2FpL2VsZW1lbnQuanNmbCcgKTsNCmxvYWRDb21tYW5kU2NyaXB0ICggJ21vYWkvbGF5ZXIuanNmbCcgKTsNCmxvYWRDb21tYW5kU2NyaXB0ICggJ21vYWkvbWF0cml4LmpzZmwnICk7DQpsb2FkQ29tbWFuZFNjcmlwdCAoICdtb2FpL3V0aWwuanNmbCcgKTsNCg0KbG9hZENvbW1hbmRTY3JpcHQgKCAnbW9haS9FcnJvclN0cmluZ3MuanNmbCcgKTsNCmxvYWRDb21tYW5kU2NyaXB0ICggJ21vYWkvTW90aW9uWE1MRXhwb3J0ZXIuanNmbCcgKTsNCiovDQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBleHBvcnRUb0x1YSAoKSB7DQoJDQoJdmFyIGRvY3VtZW50ID0gZmwuZ2V0RG9jdW1lbnRET00gKCk7DQoJdmFyIGZvbGRlclBhdGggPSBmbC5icm93c2VGb3JGb2xkZXJVUkwgKCAnU2VsZWN0IGEgZm9sZGVyLicgKSArICcvJzsNCgkNCglpZiAoIGZvbGRlclBhdGggJiYgIGZvbGRlclBhdGgubGVuZ3RoICkgew0KCQkNCgkJdmFyIGx1YSA9IGdldERvY3VtZW50THVhQW5kRXhwb3J0ICggZG9jdW1lbnQsIGZvbGRlclBhdGggKTsNCgkJDQoJCXZhciBmaWxlUGF0aCA9IGZvbGRlclBhdGggKyBkb2N1bWVudC5uYW1lICsgJy5sdWEnOw0KCQlpZiAoICFGTGZpbGUud3JpdGUgKCBmaWxlUGF0aCwgbHVhICkpIHsNCgkJCWFsZXJ0KCAiRXJyb3Igc2F2aW5nIGZpbGUiICk7IA0KCQl9DQoJfQ0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KZnVuY3Rpb24gZ2V0RG9jdW1lbnRMdWFBbmRFeHBvcnQgKCBkb2N1bWVudCwgcGF0aFVSSSApIHsNCgkNCgl2YXIgdGltZWxpbmUgPSBkb2N1bWVudC5nZXRUaW1lbGluZSAoKTsNCgl2YXIgZnJhbWVSYXRlID0gZG9jdW1lbnQuZnJhbWVSYXRlOw0KCQ0KCXZhciBsdWEgPSAnJzsNCglsdWEgKz0gZ2V0VGltZWxpbmVMdWEgKCB0aW1lbGluZSwgZnJhbWVSYXRlLCAnJyApOw0KCWx1YSArPSBnZXRMaWJyYXJ5THVhQW5kRXhwb3J0ICggZG9jdW1lbnQubGlicmFyeSwgJycsIHBhdGhVUkkgKTsNCglsdWEgKz0gJ3JldHVybiBsaWJyYXJ5LCB0aW1lbGluZVxuJzsNCgkNCglyZXR1cm4gbHVhOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KZnVuY3Rpb24gZ2V0RWFzZUN1cnZlTHVhICggY3VydmUsIG5hbWUsIGluZGVudCApIHsNCgkNCgl2YXIgbHVhID0gJyc7DQoJdmFyIGluZGVudDIgPSBpbmRlbnQgKyAnXHQnOw0KCQ0KCWx1YSArPSBsdWFUYWJsZU9wZW4gKCBuYW1lLCBpbmRlbnQgKTsNCgkNCglmb3IgKCB2YXIgaSA9IDA7IGkgPCBjdXJ2ZS5sZW5ndGg7IGkrKyApIHsNCgkJdmFyIHBvaW50ID0gY3VydmUgWyBpIF07DQoJCWx1YSArPSBpbmRlbnQyICsgJ1sgJyArICggaSArIDEgKSArICcgXSA9IHsnICsgJ1sgXCd4XCcgXSA9ICcgKyBwb2ludC54ICsgJywgWyBcJ3lcJyBdID0gJyArIHBvaW50LnkgKyAnIH0sXG4nOw0KCX0NCgkNCglsdWEgKz0gbHVhVGFibGVDbG9zZSAoIGluZGVudCApOw0KCXJldHVybiBsdWE7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBnZXRFbGVtZW50THVhICggZWxlbWVudCwgaWR4LCBpbmRlbnQgKSB7DQoNCgl2YXIgbHVhID0gJyc7DQoJdmFyIGluZGVudDIgPSBpbmRlbnQgKyAnXHQnOw0KDQoJbHVhICs9IGx1YUhlYWRpbmcgKCAnZWxlbWVudCcsIGluZGVudCApOw0KCWx1YSArPSBsdWFUYWJsZU9wZW4gKCBpZHgsIGluZGVudCApOw0KCQ0KCXZhciBpdGVtID0gZWxlbWVudC5saWJyYXJ5SXRlbTsNCglpZiAoIGl0ZW0gKSB7DQoJCWx1YSArPSBsdWFLZXlWYWwgKCAnbmFtZScsIGl0ZW0ubmFtZSwgaW5kZW50MiApOw0KCX0NCgkNCglsdWEgKz0gbHVhS2V5VmFsICggJ3gnLCBlbGVtZW50LngsIGluZGVudDIgKTsNCglsdWEgKz0gbHVhS2V5VmFsICggJ3knLCBlbGVtZW50LnksIGluZGVudDIgKTsNCglsdWEgKz0gbHVhS2V5VmFsICggJ3InLCBlbGVtZW50LnJvdGF0aW9uLCBpbmRlbnQyICk7DQoJbHVhICs9IGx1YUtleVZhbCAoICdzeCcsIGVsZW1lbnQuc2NhbGVYLCBpbmRlbnQyICk7DQoJbHVhICs9IGx1YUtleVZhbCAoICdzeScsIGVsZW1lbnQuc2NhbGVZLCBpbmRlbnQyICk7DQoJDQoJbHVhICs9IGx1YVRhYmxlQ2xvc2UgKCBpbmRlbnQgKTsNCglyZXR1cm4gbHVhOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KZnVuY3Rpb24gZ2V0RnJhbWVMdWEgKCBmcmFtZSwgaWR4LCBzdGFydElkeCwgaW5kZW50ICkgew0KDQoJdmFyIGx1YSA9ICcnOw0KCXZhciBpbmRlbnQyID0gaW5kZW50ICsgJ1x0JzsNCgl2YXIgaW5kZW50MyA9IGluZGVudDIgKyAnXHQnOw0KCQ0KCWx1YSArPSBsdWFIZWFkaW5nICggJ2ZyYW1lJywgaW5kZW50ICk7DQoJbHVhICs9IGx1YVRhYmxlT3BlbiAoIGlkeCwgaW5kZW50ICk7DQoJDQoJbHVhICs9IGx1YUtleVZhbCAoICdzdGFydCcsIHN0YXJ0SWR4LCBpbmRlbnQyICk7DQoJbHVhICs9IGx1YUtleVZhbCAoICdsZW5ndGgnLCBmcmFtZS5kdXJhdGlvbiwgaW5kZW50MiApOw0KCQ0KCS8vIGVsZW1lbnRzDQoJbHVhICs9IGx1YVRhYmxlT3BlbiAoICdlbGVtZW50cycsIGluZGVudDIgKTsNCglmb3IgKCB2YXIgaSA9IDA7IGkgPCBmcmFtZS5lbGVtZW50cy5sZW5ndGg7ICsraSApIHsNCgkJZWxlbWVudCA9IGZyYW1lLmVsZW1lbnRzIFsgaSBdOw0KCQlsdWEgKz0gZ2V0RWxlbWVudEx1YSAoIGVsZW1lbnQsIGkgKyAxLCBpbmRlbnQzICk7DQoJfQ0KCWx1YSArPSBsdWFUYWJsZUNsb3NlICggaW5kZW50MiApOw0KDQoJLy8gZWFzZQ0KCWlmICggZnJhbWUuaGFzQ3VzdG9tRWFzZSApIHsNCgkJaWYgKCBmcmFtZS51c2VTaW5nbGVFYXNlQ3VydmUgKSB7DQoJCQlsdWEgKz0gZ2V0RWFzZUN1cnZlTHVhICggZnJhbWUuZ2V0Q3VzdG9tRWFzZSAoKSwgJ2Vhc2VDdXJ2ZScsIGluZGVudDIgKTsNCgkJfQ0KCQllbHNlIHsNCgkJCWx1YSArPSBsdWFUYWJsZU9wZW4gKCAnZWFzZUN1cnZlcycsIGluZGVudDIgKTsNCgkJCWx1YSArPSBnZXRFYXNlQ3VydmVMdWEgKCBmcmFtZS5nZXRDdXN0b21FYXNlICggJ3Bvc2l0aW9uJyApLCAncG9zaXRpb24nLCBpbmRlbnQzICk7DQoJCQlsdWEgKz0gZ2V0RWFzZUN1cnZlTHVhICggZnJhbWUuZ2V0Q3VzdG9tRWFzZSAoICdyb3RhdGlvbicgKSwgJ3JvdGF0aW9uJywgaW5kZW50MyApOw0KCQkJbHVhICs9IGdldEVhc2VDdXJ2ZUx1YSAoIGZyYW1lLmdldEN1c3RvbUVhc2UgKCAnc2NhbGUnICksICdzY2FsZScsIGluZGVudDMgKTsNCgkJCWx1YSArPSBnZXRFYXNlQ3VydmVMdWEgKCBmcmFtZS5nZXRDdXN0b21FYXNlICggJ2NvbG9yJyApLCAnY29sb3InLCBpbmRlbnQzICk7DQoJCQlsdWEgKz0gbHVhVGFibGVDbG9zZSAoIGluZGVudDIgKTsNCgkJfQ0KCX0NCgllbHNlIHsNCgkJbHVhICs9IGx1YUtleVZhbCAoICdlYXNlJywgZnJhbWUudHdlZW5FYXNpbmcsIGluZGVudDIgKTsNCgl9DQoNCglsdWEgKz0gbHVhVGFibGVDbG9zZSAoIGluZGVudCApOw0KCXJldHVybiBsdWE7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBnZXRJdGVtTHVhQW5kRXhwb3J0ICggaXRlbSwgaW5kZW50LCBwYXRoVVJJICkgew0KCQ0KCXZhciBsaWJyYXJ5ID0gZmwuZ2V0RG9jdW1lbnRET00oKS5saWJyYXJ5Ow0KCXZhciBkb2N1bWVudCA9IGZsLmNyZWF0ZURvY3VtZW50ICgpOw0KCQ0KCWxpYnJhcnkuc2VsZWN0SXRlbSAoIGl0ZW0gKTsNCglkb2N1bWVudC5hZGRJdGVtICh7IHg6MCwgeTowIH0sIGl0ZW0gKTsNCg0KCXZhciB0aW1lbGluZSA9IGRvY3VtZW50LmdldFRpbWVsaW5lICgpOw0KCXRpbWVsaW5lLmN1cnJlbnRGcmFtZSA9IDA7DQoJDQoJdmFyIGxheWVyID0gdGltZWxpbmUubGF5ZXJzIFsgMCBdOw0KCXZhciBmcmFtZSA9IGxheWVyLmZyYW1lcyBbIDAgXTsNCgl2YXIgZWxlbWVudCA9IGZyYW1lLmVsZW1lbnRzIFsgMCBdOw0KCQ0KCWRvY3VtZW50LndpZHRoID0gTWF0aC5jZWlsICggZWxlbWVudC53aWR0aCApOw0KCWRvY3VtZW50LmhlaWdodCA9IE1hdGguY2VpbCAoIGVsZW1lbnQuaGVpZ2h0ICk7DQoJCQ0KCWVsZW1lbnQueCA9IGRvY3VtZW50LndpZHRoIC8gMjsNCgllbGVtZW50LnkgPSBkb2N1bWVudC5oZWlnaHQgLyAyOw0KCQ0KCXZhciBmaWxlbmFtZSA9IGl0ZW0ubmFtZSArICcucG5nJzsNCglkb2N1bWVudC5leHBvcnRQTkcgKCBwYXRoVVJJICsgZmlsZW5hbWUsIHRydWUsIHRydWUgKTsNCgkNCgl2YXIgbHVhID0gJyc7DQoJdmFyIGluZGVudDIgPSBpbmRlbnQgKyAnXHQnOw0KCQ0KCWx1YSArPSBsdWFIZWFkaW5nICggJ2l0ZW0nLCBpbmRlbnQgKTsNCglsdWEgKz0gbHVhVGFibGVPcGVuICggaXRlbS5uYW1lLCBpbmRlbnQgKTsNCglsdWEgKz0gbHVhS2V5VmFsICggJ2ZpbGVuYW1lJywgZmlsZW5hbWUsIGluZGVudDIgKTsNCglsdWEgKz0gbHVhS2V5VmFsICggJ3dpZHRoJywgZG9jdW1lbnQud2lkdGgsIGluZGVudDIgKTsNCglsdWEgKz0gbHVhS2V5VmFsICggJ2hlaWdodCcsIGRvY3VtZW50LmhlaWdodCwgaW5kZW50MiApOw0KCQ0KCWZsLmNsb3NlRG9jdW1lbnQgKCBkb2N1bWVudCwgZmFsc2UgKTsNCglsdWEgKz0gbHVhVGFibGVDbG9zZSAoIGluZGVudCApOw0KCXJldHVybiBsdWE7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBnZXRMYXllckx1YSAoIGxheWVyLCBpZHgsIGluZGVudCApIHsNCg0KCXZhciBsdWEgPSAnJzsNCgl2YXIgaW5kZW50MiA9IGluZGVudCArICdcdCc7DQoJdmFyIGluZGVudDMgPSBpbmRlbnQyICsgJ1x0JzsNCg0KCWx1YSArPSBsdWFIZWFkaW5nICggJ2xheWVyJywgaW5kZW50ICk7DQoJbHVhICs9IGx1YVRhYmxlT3BlbiAoIGlkeCwgaW5kZW50ICk7DQoJDQoJbHVhICs9IGx1YUtleVZhbCAoICduYW1lJywgbGF5ZXIubmFtZSwgaW5kZW50MiApOw0KCWx1YSArPSBsdWFLZXlWYWwgKCAnbGVuZ3RoJywgbGF5ZXIuZnJhbWVzLmxlbmd0aCwgaW5kZW50MiApOw0KCQ0KCXZhciBpZHggPSAxOw0KCWx1YSArPSBsdWFUYWJsZU9wZW4gKCAnZnJhbWVzJywgaW5kZW50MiApOw0KCWZvciAoIHZhciBpID0gMDsgaSA8IGxheWVyLmZyYW1lcy5sZW5ndGg7ICsraSApIHsNCgkJZnJhbWUgPSBsYXllci5mcmFtZXMgWyBpIF07DQoJCQ0KCQkvLyBza2lwIG5vbi1rZXlmcmFtZXMNCgkJaWYgKCBmcmFtZS5zdGFydEZyYW1lICE9IGkgKSBjb250aW51ZTsNCg0KCQlsdWEgKz0gZ2V0RnJhbWVMdWEgKCBmcmFtZSwgaWR4KyssIGksIGluZGVudDMgKTsNCgl9DQoJbHVhICs9IGx1YVRhYmxlQ2xvc2UgKCBpbmRlbnQyICk7DQoJDQoJbHVhICs9IGx1YVRhYmxlQ2xvc2UgKCBpbmRlbnQgKTsNCglyZXR1cm4gbHVhOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KZnVuY3Rpb24gZ2V0TGlicmFyeUx1YUFuZEV4cG9ydCAoIGxpYnJhcnksIGluZGVudCwgcGF0aFVSSSApIHsNCgkNCgl2YXIgbHVhID0gJyc7DQoJdmFyIGluZGVudDIgPSBpbmRlbnQgKyAnXHQnOw0KCQ0KCWx1YSArPSBpbmRlbnQgKyAnbG9jYWwgbGlicmFyeSA9IHtcbic7DQoJDQoJZm9yICggdmFyIGkgPSAwOyBpIDwgbGlicmFyeS5pdGVtcy5sZW5ndGg7IGkrKyApIHsNCgkJdmFyIGl0ZW0gPSBsaWJyYXJ5Lml0ZW1zIFsgaSBdOw0KCQlsdWEgKz0gZ2V0SXRlbUx1YUFuZEV4cG9ydCAoIGl0ZW0sIGluZGVudDIsIHBhdGhVUkkgKTsNCgl9DQoJDQoJbHVhICs9IGluZGVudCArICd9XG5cbic7DQoJcmV0dXJuIGx1YTsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCmZ1bmN0aW9uIGdldFRpbWVsaW5lTHVhICggdGltZWxpbmUsIGZyYW1lUmF0ZSwgaW5kZW50ICkgew0KCQ0KCXZhciBsdWEgPSAnJzsNCgl2YXIgaW5kZW50MiA9IGluZGVudCArICdcdCc7DQoJdmFyIGluZGVudDMgPSBpbmRlbnQyICsgJ1x0JzsNCg0KCWx1YSArPSBpbmRlbnQgKyAnbG9jYWwgdGltZWxpbmUgPSB7XG4nOw0KCQ0KCWx1YSArPSBsdWFLZXlWYWwgKCAnbmFtZScsIHRpbWVsaW5lLm5hbWUsIGluZGVudDIgKTsNCglsdWEgKz0gbHVhS2V5VmFsICggJ2ZwcycsIGZyYW1lUmF0ZSwgaW5kZW50MiApOw0KCWx1YSArPSBsdWFLZXlWYWwgKCAnbGVuZ3RoJywgdGltZWxpbmUuZnJhbWVDb3VudCwgaW5kZW50MiApOw0KCQ0KCWx1YSArPSBsdWFUYWJsZU9wZW4gKCAnbGF5ZXJzJywgaW5kZW50MiApOw0KCWZvciAoIHZhciBpID0gMDsgaSA8IHRpbWVsaW5lLmxheWVycy5sZW5ndGg7ICsraSApIHsNCgkJbGF5ZXIgPSB0aW1lbGluZS5sYXllcnMgWyBpIF07DQoJCQ0KCQlpZiAoIGxheWVyLmxheWVyVHlwZSAhPSAnbm9ybWFsJyApIGNvbnRpbnVlOw0KCQlsdWEgKz0gZ2V0TGF5ZXJMdWEgKCBsYXllciwgaSArIDEsIGluZGVudDMgKTsNCgl9DQoJbHVhICs9IGx1YVRhYmxlQ2xvc2UgKCBpbmRlbnQyICk7DQoJDQoJbHVhICs9IGluZGVudCArICd9XG5cbic7DQoJcmV0dXJuIGx1YTsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCmZ1bmN0aW9uIGx1YUNvbW1lbnQgKCBjb21tZW50LCBpbmRlbnQgKSB7DQoNCglyZXR1cm4gaW5kZW50ICsgJy0tICcgKyBjb21tZW50ICsgJ1xuJzsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCmZ1bmN0aW9uIGx1YUVzY2FwZSAoIHZhbCApIHsNCg0KCWlmICggdHlwZW9mIHZhbCA9PSAnc3RyaW5nJyApIHsNCgkJcmV0dXJuICdcJycgKyB2YWwgKyAnXCcnOw0KCX0NCglyZXR1cm4gdmFsOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KZnVuY3Rpb24gbHVhS2V5VmFsICgga2V5LCB2YWwsIGluZGVudCApIHsNCg0KCWtleSA9IGx1YUVzY2FwZSAoIGtleSApOw0KCXZhbCA9IGx1YUVzY2FwZSAoIHZhbCApOw0KDQoJcmV0dXJuIGluZGVudCArICdbICcgKyBrZXkgKyAnIF0gPSAnICsgdmFsICsgJyxcbic7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBsdWFUYWJsZUNsb3NlICggaW5kZW50ICkgew0KCQ0KCXJldHVybiBpbmRlbnQgKyAnfSxcbic7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBsdWFUYWJsZU9wZW4gKCBrZXksIGluZGVudCApIHsNCgkNCglrZXkgPSBsdWFFc2NhcGUgKCBrZXkgKTsNCglyZXR1cm4gaW5kZW50ICsgJ1sgJyArIGtleSArICcgXSA9IHtcbic7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBsdWFIZWFkaW5nICggY29tbWVudCwgaW5kZW50ICkgew0KDQoJcmV0dXJuICdcbicgKyBsdWFDb21tZW50ICggY29tbWVudCwgaW5kZW50ICk7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiByZWZsZWN0ICggb2JqTmFtZSwgb2JqICkgew0KCQ0KCWZsLnRyYWNlICggb2JqTmFtZSApOw0KCQ0KCWZvciAoIHZhciBtZW1iZXIgaW4gb2JqICl7DQoJCWZsLnRyYWNlICggJ1x0JyArIG1lbWJlciArICc6ICcgKyBvYmogWyBtZW1iZXIgXSk7DQoJfQ0KCWZsLnRyYWNlICggJ1xuJyApOw0KfQ0KDQpleHBvcnRUb0x1YSAoKTsNCu+7vy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQovLyBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxMSBaaXBsaW5lIEdhbWVzLCBJbmMuIA0KLy8gQWxsIFJpZ2h0cyBSZXNlcnZlZC4gDQovLyBodHRwOi8vZ2V0bW9haS5jb20NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiBtYWtlU3ltYm9sc0ZvckRvY3VtZW50ICgpIHsNCgkNCgl2YXIgZG9jdW1lbnQgPSBmbC5nZXREb2N1bWVudERPTSAoKTsNCgkNCgl2YXIgdGltZWxpbmVzID0gZG9jdW1lbnQudGltZWxpbmVzOw0KCWZvciAoIHZhciBpID0gMDsgaSA8IHRpbWVsaW5lcy5sZW5ndGg7ICsraSApIHsNCgkJdmFyIHRpbWVsaW5lID0gdGltZWxpbmVzIFsgaSBdOw0KCQl2YXIgbGF5ZXJzID0gdGltZWxpbmUubGF5ZXJzOw0KCQkNCgkJZm9yICggdmFyIGZyYW1lSWR4ID0gMDsgZnJhbWVJZHggPCB0aW1lbGluZS5mcmFtZUNvdW50OyArK2ZyYW1lSWR4ICkgew0KCQkJZm9yICggdmFyIGxheWVySWR4ID0gMDsgbGF5ZXJJZHggPCBsYXllcnMubGVuZ3RoOyArK2xheWVySWR4ICkgew0KCQkJCQ0KCQkJCXZhciBsYXllciA9IGxheWVycyBbIGxheWVySWR4IF07DQoJCQkJdmFyIGZyYW1lcyA9IGxheWVyLmZyYW1lczsNCgkJCQkNCgkJCQlpZiAoIGZyYW1lSWR4ID49IGZyYW1lcy5sZW5ndGggKSBjb250aW51ZTsNCgkJCQkNCgkJCQl2YXIgbG9ja2VkID0gbGF5ZXIubG9ja2VkOw0KCQkJCWxheWVyLmxvY2tlZCA9IGZhbHNlDQoJCQkJdmFyIGZyYW1lID0gbGF5ZXIuZnJhbWVzIFsgZnJhbWVJZHggXTsNCgkJCQkNCgkJCQlpZiAoIGZyYW1lLmVsZW1lbnRzLmxlbmd0aCApIHsNCgkJCQkNCgkJCQkJdGltZWxpbmUuY3VycmVudEZyYW1lID0gZnJhbWVJZHg7DQoJCQkJCXRpbWVsaW5lLnNldFNlbGVjdGVkTGF5ZXJzICggbGF5ZXJJZHgsIGZhbHNlICk7DQoJCQkJCXRpbWVsaW5lLnNldFNlbGVjdGVkRnJhbWVzICggZnJhbWVJZHgsIGZyYW1lSWR4ICk7DQoJCQkJCW1ha2VTeW1ib2xzRm9yRnJhbWUgKCBkb2N1bWVudCwgZnJhbWUgKTsNCgkJCQl9DQoJCQkJbGF5ZXIubG9ja2VkID0gbG9ja2VkOw0KCQkJfQ0KCQl9DQoJfQ0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KZnVuY3Rpb24gbWFrZVN5bWJvbHNGb3JGcmFtZSAoIGRvY3VtZW50LCBmcmFtZSApIHsNCgkNCglkb2N1bWVudC5zZWxlY3ROb25lICgpOw0KCQ0KCXZhciBlbGVtZW50cyA9IGZyYW1lLmVsZW1lbnRzOw0KCWZvciAoIHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgKytpICkgew0KCQl2YXIgZWxlbWVudCA9IGVsZW1lbnRzIFsgaSBdOw0KCQkNCgkJaWYgKCBlbGVtZW50LmVsZW1lbnRUeXBlID09ICdzaGFwZScgKSB7DQoJCQkNCgkJCWVsZW1lbnQuc2VsZWN0ZWQgPSB0cnVlOw0KCQkJDQoJCQkvL3ZhciBzZWxlY3Rpb24gPSBkb2N1bWVudC5zZWxlY3Rpb247DQoJCQkvL2ZvciAoIHZhciBqID0gMDsgaiA8IHNlbGVjdGlvbi5sZW5ndGg7ICsraiApIHsNCgkJCS8vCWZsLnRyYWNlICggJ3NlbGVjdGlvbiEnICk7DQoJCQkvL30NCgkJCWRvY3VtZW50LmNvbnZlcnRUb1N5bWJvbCAoICdncmFwaGljJywgJycsICdjZW50ZXInICk7DQoJCQlkb2N1bWVudC5hcnJhbmdlICggJ2JhY2snICk7DQoJCQlkb2N1bWVudC5saWJyYXJ5LnNlbGVjdE5vbmUgKCk7DQoJCQlkb2N1bWVudC5zZWxlY3ROb25lICgpOw0KCQl9DQoJCWVsc2UgaWYgKCBlbGVtZW50LmVsZW1lbnRUeXBlID09ICd0ZXh0JyApIHsNCgkJCQ0KCQkJdmFyIGRlcHRoID0gZWxlbWVudC5kZXB0aDsNCgkJCQ0KCQkJZWxlbWVudC5zZWxlY3RlZCA9IHRydWU7DQoJCQlkb2N1bWVudC5jb252ZXJ0VG9TeW1ib2wgKCAnZ3JhcGhpYycsICcnLCAnY2VudGVyJyApOw0KCQkJDQoJCQllbGVtZW50ID0gZG9jdW1lbnQuc2VsZWN0aW9uIFsgMCBdOw0KCQkJd2hpbGUgKCBlbGVtZW50LmRlcHRoIDwgZGVwdGggKSB7DQoJCQkJZG9jdW1lbnQuYXJyYW5nZSAoICdiYWNrd2FyZCcgKTsNCgkJCX0NCgkJfQ0KCX0NCn0NCg0KbWFrZVN5bWJvbHNGb3JEb2N1bWVudCAoKTsNCu+7vy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQovLyBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxMSBaaXBsaW5lIEdhbWVzLCBJbmMuIA0KLy8gQWxsIFJpZ2h0cyBSZXNlcnZlZC4gDQovLyBodHRwOi8vZ2V0bW9haS5jb20NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQoNCmZsLnJ1blNjcmlwdCAoIGZsLmNvbmZpZ1VSSSArICdDb21tYW5kcy9tb2FpL1RleHR1cmVBdGxhcy5qc2ZsJyApOw0KDQp2YXIgYXRsYXMgPSBuZXcgVGV4dHVyZUF0bGFzICggMSwgZmFsc2UgKTsNCg0KdmFyIHBhY2tlZCA9IGF0bGFzLmdldFBhY2tMaXN0Rm9yTGlicmFyeSAoKTsNCnZhciBzaXplID0gYXRsYXMuZ2V0VGV4dHVyZVNpemUgKCBwYWNrZWQgKTsNCg0KZmwudHJhY2UgKCAnVGV4dHVyZSBBdGxhcyBTaXplOiAnICsgc2l6ZS53aWR0aCArICcgeCAnICsgc2l6ZS5oZWlnaHQgKTsNCu+7vy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQovLyBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxMSBaaXBsaW5lIEdhbWVzLCBJbmMuIA0KLy8gQWxsIFJpZ2h0cyBSZXNlcnZlZC4gDQovLyBodHRwOi8vZ2V0bW9haS5jb20NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQoNCmZsLnJ1blNjcmlwdCAoIGZsLmNvbmZpZ1VSSSArICdDb21tYW5kcy9tb2FpL1NldHRpbmdzLmpzZmwnICk7DQpmbC5ydW5TY3JpcHQgKCBmbC5jb25maWdVUkkgKyAnQ29tbWFuZHMvbW9haS9UZXh0dXJlQXRsYXMuanNmbCcgKTsNCg0KdmFyIGF0bGFzID0gbmV3IFRleHR1cmVBdGxhcyAoIE1PQUlfVEVYVFVSRV9BVExBU19QQURESU5HLCBNT0FJX1RFWFRVUkVfQVRMQVNfRk9SQ0VfU1FVQVJFICk7DQoNCmF0bGFzLmNyZWF0ZVRleHR1cmVBdGxhcyAoKTsNCmF0bGFzLmNyZWF0ZVRleHR1cmVBdGxhc0RvYyAoKTsNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCldJTkRPV1MNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KMS4gQ29weSB0aGUgY29udGVudHMgb2YgdGhlIGpzZmwgZm9sZGVyIGludG8geW91ciBGbGFzaCBDb25maWd1cmF0aW9uIGZvbGRlci4gT24gV2luZG93cyA3IChhbmQgdXNpbmcgQ1M1KSBteSBmb2xkZXIgd2FzIEM6XFVzZXJzXFtVU0VSTkFNRV1cQXBwRGF0YVxMb2NhbFxBZG9iZVxGbGFzaCBDUzVcZW5fVVNcQ29uZmlndXJhdGlvblxDb21tYW5kcw0KMi4gVGhlIGNvbW1hbmRzIHNob3VsZCBzaG93IHVwIGluIEZsYXNoLiBJZiB0aGV5IGRvbid0IHdvcmssIHBsZWFzZSBjb250YWN0IHVzIGF0IHN1cHBvcnRAZ2V0bW9haS5jb20u77u/Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCi8vIENvcHlyaWdodCAoYykgMjAxMC0yMDExIFppcGxpbmUgR2FtZXMsIEluYy4gDQovLyBBbGwgUmlnaHRzIFJlc2VydmVkLiANCi8vIGh0dHA6Ly9nZXRtb2FpLmNvbQ0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCg0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KdmFyIGluZGVudFN0ciA9IGZ1bmN0aW9uICggbiApIHsNCg0KCXZhciBzdHIgPSAnJzsNCglmb3IgKCB2YXIgaSA9IDA7IGkgPCBuOyArK2kgKSB7DQoJCXN0ciArPSAnXHQnOw0KCX0NCglyZXR1cm4gc3RyOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KdmFyIGx1YUVzY2FwZSA9IGZ1bmN0aW9uICggdmFsICkgew0KDQoJdmFyIHR5cGUgPSB0eXBlb2YgdmFsOw0KCQ0KCWlmICggdHlwZSA9PSAnc3RyaW5nJyApIHsNCgkJcmV0dXJuICdcJycgKyB2YWwgKyAnXCcnOw0KCX0NCgllbHNlIGlmICggdHlwZSA9PSAnYm9vbGVhbicgKSB7DQoJCXJldHVybiB2YWwgPyAndHJ1ZScgOiAnZmFsc2UnOw0KCX0NCglyZXR1cm4gdmFsOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KdmFyIGx1YUtleVZhbCA9IGZ1bmN0aW9uICgga2V5LCB2YWwsIGluZGVudCApIHsNCg0KCWlmICggdHlwZW9mIHZhbCA9PSAndW5kZWZpbmVkJyApIHJldHVybjsNCgkNCglrZXkgPSBsdWFFc2NhcGUgKCBrZXkgKTsNCglpZiAoIHZhbC50b0x1YSApIHsNCgkJDQoJCXZhciBsdWEgPSAnJzsNCgkJbHVhICs9IGluZGVudFN0ciAoIGluZGVudCApICsgJ1sgJyArIGtleSArICcgXSA9IHtcbic7DQoJCWx1YSArPSB2YWwudG9MdWEgKCBpbmRlbnQgKyAxICk7DQoJCWx1YSArPSBpbmRlbnRTdHIgKCBpbmRlbnQgKSArICd9LFxuJzsNCgkJcmV0dXJuIGx1YTsNCgl9DQoJDQoJdmFsID0gbHVhRXNjYXBlICggdmFsICk7DQoJcmV0dXJuIGluZGVudFN0ciAoIGluZGVudCApICsgJ1sgJyArIGtleSArICcgXSA9ICcgKyB2YWwgKyAnLFxuJzsNCn0NCg0KLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8NCi8vIEx1YVRhYmxlDQovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLw0KZnVuY3Rpb24gTHVhVGFibGUgKCkgew0KCQ0KCXRoaXMubnVtZXJpYyA9IG5ldyBBcnJheSAoKTsNCgl0aGlzLm5hbWVkID0ge307DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpMdWFUYWJsZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCBpbmRleCApIHsNCiAgICANCgl2YXIgdHlwZSA9IHR5cGVvZiBpbmRleDsNCgkNCglpZiAoIHR5cGUgPT0gJ3N0cmluZycgKSB7DQoJCXJldHVybiB0aGlzLm5hbWVkIFsgaW5kZXggXTsNCgl9DQoJZWxzZSBpZiAoIHR5cGUgPT0gJ251bWJlcicgKSB7DQoJCXJldHVybiB0aGlzLm51bWVyaWMgWyBpbmRleCBdOw0KCX0NCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCkx1YVRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKCBpdGVtICkgew0KDQoJaWR4ID0gdGhpcy5udW1lcmljLmxlbmd0aDsNCgl0aGlzLm51bWVyaWMucHVzaCAoIGl0ZW0gKTsNCglyZXR1cm4gaWR4Ow0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KTHVhVGFibGUucHJvdG90eXBlLnB1c2hUYWJsZSA9IGZ1bmN0aW9uICgpIHsNCg0KCXZhciBsdWEgPSBuZXcgTHVhVGFibGUgKCk7DQoJdGhpcy5wdXNoICggbHVhICk7DQoJcmV0dXJuIGx1YTsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCkx1YVRhYmxlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoIGluZGV4LCBpdGVtICkgew0KDQoJdmFyIHR5cGUgPSB0eXBlb2YgaW5kZXg7DQoJDQoJaWYgKCB0eXBlID09ICdzdHJpbmcnICkgew0KCQl0aGlzLm5hbWVkIFsgaW5kZXggXSA9IGl0ZW07DQoJfQ0KCWVsc2UgaWYgKCB0eXBlID09ICdudW1iZXInICkgew0KCQl0aGlzLm51bWVyaWMgWyBpbmRleCBdID0gaXRlbTsNCgl9DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpMdWFUYWJsZS5wcm90b3R5cGUuc2V0VGFibGUgPSBmdW5jdGlvbiAoIGluZGV4ICkgew0KDQoJdmFyIGx1YSA9IG5ldyBMdWFUYWJsZSAoKTsNCgl0aGlzLnNldCAoIGluZGV4LCBsdWEgKTsNCglyZXR1cm4gbHVhOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KTHVhVGFibGUucHJvdG90eXBlLnRvTHVhID0gZnVuY3Rpb24gKCBpbmRlbnQgKSB7DQoJDQoJaWYgKCAhaW5kZW50ICkgew0KCQlpbmRlbnQgPSAwOw0KCX0NCgkNCgl2YXIgbHVhID0gJyc7DQoJDQoJdmFyIG5hbWVkID0gdGhpcy5uYW1lZDsNCglmb3IgKCB2YXIga2V5IGluIG5hbWVkICl7DQoJCQ0KCQl2YXIgdmFsID0gbmFtZWQgWyBrZXkgXTsNCgkJbHVhICs9IGx1YUtleVZhbCAoIGtleSwgdmFsLCBpbmRlbnQgKTsNCgl9DQoJDQoJdmFyIG51bWVyaWMgPSB0aGlzLm51bWVyaWM7DQoJZm9yICggdmFyIGkgPSAwOyBpIDwgbnVtZXJpYy5sZW5ndGg7ICsraSApew0KCQkNCgkJdmFyIHZhbCA9IG51bWVyaWMgWyBpIF07DQoJCWlmICggdmFsICkgew0KCQkJbHVhICs9IGx1YUtleVZhbCAoIGkgKyAxLCB2YWwsIGluZGVudCApOw0KCQl9DQoJfQ0KCQ0KCXJldHVybiBsdWE7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpMdWFUYWJsZS5wcm90b3R5cGUudG9MdWFMb2NhbFRhYmxlID0gZnVuY3Rpb24gKCBuYW1lICkgew0KCQ0KCXZhciBsdWEgPSAnbG9jYWwgJyArIG5hbWUgKyAnID0ge1xuJzsNCglsdWEgKz0gdGhpcy50b0x1YSAoIDEgKTsNCglsdWEgKz0gJ31cbic7DQoJcmV0dXJuIGx1YTsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCkx1YVRhYmxlLnByb3RvdHlwZS50b0x1YVRhYmxlID0gZnVuY3Rpb24gKCBuYW1lICkgew0KCQ0KCXZhciBsdWEgPSBuYW1lICsgJyA9IHtcbic7DQoJbHVhICs9IHRoaXMudG9MdWEgKCAxICk7DQoJbHVhICs9ICd9XG4nOw0KCXJldHVybiBsdWE7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpmdW5jdGlvbiB0ZXN0ICgpIHsNCgkNCgl2YXIgdGFibGUgPSBuZXcgTHVhVGFibGUgKCk7DQoJDQoJdGFibGUuc2V0ICggJ2ZvbycsICdmb28hJyApOw0KCXRhYmxlLnNldCAoICdiYXInLCAzNyApOw0KCXRhYmxlLnNldCAoIDIsICdiYXohJyApOw0KCQ0KCXZhciB0YWJsZTIgPSBuZXcgTHVhVGFibGUgKCk7DQoJdGFibGUyLnNldCAoICdiaWZmJywgJ2Z1aCEnICk7DQoJdGFibGUyLnNldCAoICdibGFwcCcsIDM3ICk7DQoJdGFibGUyLnNldCAoIDIsICdibG90dG8hJyApOw0KCXRhYmxlLnNldCAoIDUsIHRhYmxlMiApOw0KCQ0KCXZhciBsdWEgPSB0YWJsZS50b0x1YUxvY2FsVGFibGUgKCAndGFibGUnICk7DQoJZmwudHJhY2UgKCBsdWEgKTsNCn0NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQovLyBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxMSBaaXBsaW5lIEdhbWVzLCBJbmMuIA0KLy8gQWxsIFJpZ2h0cyBSZXNlcnZlZC4gDQovLyBodHRwOi8vZ2V0bW9haS5jb20NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQoNCnZhciBNT0FJX1RFWFRVUkVfQVRMQVNfUEFERElORwkJCT0gMjsNCnZhciBNT0FJX1RFWFRVUkVfQVRMQVNfRk9SQ0VfU1FVQVJFCQk9IHRydWU7DQrvu78vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KLy8gQ29weXJpZ2h0IChjKSAyMDEwLTIwMTEgWmlwbGluZSBHYW1lcywgSW5jLiANCi8vIEFsbCBSaWdodHMgUmVzZXJ2ZWQuIA0KLy8gaHR0cDovL2dldG1vYWkuY29tDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KDQoNCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vDQovLyBTcHJpdGVEZWNrQnVpbGRlcg0KLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8NCmZ1bmN0aW9uIFNwcml0ZURlY2tCdWlsZGVyICgpIHsNCgkNCgl0aGlzLnNwcml0ZURlY2sgPSBuZXcgTHVhVGFibGUgKCk7DQoNCgl0aGlzLnV2UmVjdHMgPSBuZXcgTHVhVGFibGUgKCk7DQoJdGhpcy5zcHJpdGVEZWNrLnNldCAoICd1dlJlY3RzJywgdGhpcy51dlJlY3RzICk7DQoJDQoJdGhpcy5xdWFkcyA9IG5ldyBMdWFUYWJsZSAoKTsNCgl0aGlzLnNwcml0ZURlY2suc2V0ICggJ3F1YWRzJywgdGhpcy5xdWFkcyApOw0KCQ0KCXRoaXMucHJpbXMgPSBuZXcgTHVhVGFibGUgKCk7DQoJdGhpcy5zcHJpdGVEZWNrLnNldCAoICdwcmltcycsIHRoaXMucHJpbXMgKTsNCgkNCgl0aGlzLnNwcml0ZXMgPSBuZXcgTHVhVGFibGUgKCk7DQoJdGhpcy5zcHJpdGVEZWNrLnNldCAoICdzcHJpdGVzJywgdGhpcy5zcHJpdGVzICk7DQoJDQoJdGhpcy5xdWFkTGliID0ge307DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpTcHJpdGVEZWNrQnVpbGRlci5wcm90b3R5cGUuYWRkU3ByaXRlRm9yRnJhbWVJZHggPSBmdW5jdGlvbiAoIGRvY3VtZW50LCB0aW1lbGluZSwgYXRsYXMsIGZyYW1lSWR4ICkgew0KCQ0KCXZhciBiYXNlID0gdGhpcy5wcmltcy5udW1lcmljLmxlbmd0aDsNCgkNCgl2YXIgbGF5ZXJzID0gdGltZWxpbmUubGF5ZXJzOw0KCWZvciAoIHZhciBsYXllcklkeCA9IGxheWVycy5sZW5ndGggLSAxOyBsYXllcklkeCA+PSAwOyAtLWxheWVySWR4ICkgew0KCQkNCgkJdmFyIGxheWVyID0gbGF5ZXJzIFsgbGF5ZXJJZHggXTsNCgkJdmFyIGZyYW1lcyA9IGxheWVyLmZyYW1lczsNCgkJDQoJCWlmICggZnJhbWVJZHggPj0gZnJhbWVzLmxlbmd0aCApIGNvbnRpbnVlOw0KCQkNCgkJdmFyIGZyYW1lID0gbGF5ZXIuZnJhbWVzIFsgZnJhbWVJZHggXTsNCgkJaWYgKCAhZnJhbWUgKSBjb250aW51ZTsNCgkJDQoJCXZhciBsb2NrZWQgPSBsYXllci5sb2NrZWQ7DQoJCWxheWVyLmxvY2tlZCA9IGZhbHNlDQoJCQ0KCQlpZiAoIGZyYW1lLmVsZW1lbnRzLmxlbmd0aCApIHsNCgkJCQ0KCQkJdGltZWxpbmUuY3VycmVudEZyYW1lID0gZnJhbWVJZHg7DQoJCQl0aW1lbGluZS5zZXRTZWxlY3RlZExheWVycyAoIGxheWVySWR4LCBmYWxzZSApOw0KCQkJdGltZWxpbmUuc2V0U2VsZWN0ZWRGcmFtZXMgKCBmcmFtZUlkeCwgZnJhbWVJZHggKTsNCgkJCQ0KCQkJdGhpcy5hZGRTcHJpdGVQcmltc0ZvckZyYW1lICggZG9jdW1lbnQsIGF0bGFzLCBmcmFtZSApOw0KCQl9DQoJCWxheWVyLmxvY2tlZCA9IGxvY2tlZDsNCgl9DQoJDQoJdmFyIHNpemUgPSB0aGlzLnByaW1zLm51bWVyaWMubGVuZ3RoIC0gYmFzZTsNCgkNCgl2YXIgc3ByaXRlID0gbmV3IEx1YVRhYmxlICgpOw0KCXNwcml0ZS5zZXQgKCAnYmFzZScsIGJhc2UgKyAxICk7DQoJc3ByaXRlLnNldCAoICdzaXplJywgc2l6ZSApOw0KCQ0KCXJldHVybiB0aGlzLnNwcml0ZXMucHVzaCAoIHNwcml0ZSApOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KU3ByaXRlRGVja0J1aWxkZXIucHJvdG90eXBlLmFkZFNwcml0ZVByaW1zRm9yRnJhbWUgPSBmdW5jdGlvbiAoIGRvY3VtZW50LCBhdGxhcywgZnJhbWUgKSB7DQoJDQoJdmFyIHhPZmYgPSAtZG9jdW1lbnQud2lkdGggKiAwLjU7DQoJdmFyIHlPZmYgPSAtZG9jdW1lbnQuaGVpZ2h0ICogMC41Ow0KCQ0KCXZhciBlbGVtZW50cyA9IGZyYW1lLmVsZW1lbnRzOw0KCWZvciAoIHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgKytpICkgew0KCQl2YXIgZWxlbWVudCA9IGVsZW1lbnRzIFsgaSBdOw0KCQkNCgkJaWYgKCBlbGVtZW50LmVsZW1lbnRUeXBlID09ICdpbnN0YW5jZScgKSB7DQoJCQkNCgkJCWl0ZW0gPSBlbGVtZW50LmxpYnJhcnlJdGVtOw0KCQkJdmFyIGVudHJ5ID0gYXRsYXMubWFwIFsgaXRlbS5uYW1lIF07DQoJCQkNCgkJCWlmICggZW50cnkgKSB7DQoJCQkJDQoJCQkJaWYgKCBlbnRyeS5pZCA9PSBudWxsICkgew0KCQkJCQkNCgkJCQkJdmFyIHV2UmVjdCA9IG5ldyBMdWFUYWJsZSAoKTsNCgkJCQkJdXZSZWN0LnNldCAoICd4MCcsIGVudHJ5LnV2UmVjdC54MCApOw0KCQkJCQl1dlJlY3Quc2V0ICggJ3kwJywgZW50cnkudXZSZWN0LnkwICk7DQoJCQkJCXV2UmVjdC5zZXQgKCAneDEnLCBlbnRyeS51dlJlY3QueDEgKTsNCgkJCQkJdXZSZWN0LnNldCAoICd5MScsIGVudHJ5LnV2UmVjdC55MSApOw0KCQkJCQkNCgkJCQkJaWYgKCBlbnRyeS51dlJlY3QuaXNSb3RhdGVkICkgew0KCQkJCQkJdXZSZWN0LnNldCAoICdyJywgdHJ1ZSApOw0KCQkJCQl9DQoJCQkJCWVudHJ5LmlkID0gdGhpcy51dlJlY3RzLnB1c2ggKCB1dlJlY3QgKTsNCgkJCQl9DQoJCQkJDQoJCQkJdmFyIHgwID0gZW50cnkubW9kZWxSZWN0LngwOw0KCQkJCXZhciB5MCA9IGVudHJ5Lm1vZGVsUmVjdC55MDsNCgkJCQl2YXIgeDEgPSBlbnRyeS5tb2RlbFJlY3QueDE7DQoJCQkJdmFyIHkxID0gZW50cnkubW9kZWxSZWN0LnkxOw0KCQkJCQ0KCQkJCXZhciBxdWFkS2V5ID0gdGhpcy5nZXRRdWFkS2V5ICggZWxlbWVudC5tYXRyaXgsIHgwLCB5MCwgeDEsIHkxICk7DQoJCQkJdmFyIHF1YWRJRCA9IHRoaXMucXVhZExpYiBbIHF1YWRLZXkgXTsNCgkJCQkNCgkJCQlpZiAoIHF1YWRJRCA9PSBudWxsICkgew0KCQkJCQl2YXIgc2NyZWVuUXVhZCA9IHRoaXMubWFrZVNjcmVlblF1YWQgKCBlbGVtZW50Lm1hdHJpeCwgeDAsIHkwLCB4MSwgeTEsIHhPZmYsIHlPZmYgKTsNCgkJCQkJcXVhZElEID0gdGhpcy5xdWFkcy5wdXNoICggc2NyZWVuUXVhZCApOw0KCQkJCQl0aGlzLnF1YWRMaWIgWyBxdWFkS2V5IF0gPSBxdWFkSUQ7DQoJCQkJfQ0KCQkJCQ0KCQkJCXZhciBwcmltID0gbmV3IEx1YVRhYmxlICgpOw0KCQkJCXByaW0uc2V0ICggJ3V2JywgZW50cnkuaWQgKyAxICk7DQoJCQkJcHJpbS5zZXQgKCAncScsIHF1YWRJRCArIDEgKTsNCgkJCQl0aGlzLnByaW1zLnB1c2ggKCBwcmltICk7DQoJCQl9DQoJCX0NCgl9DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpTcHJpdGVEZWNrQnVpbGRlci5wcm90b3R5cGUuZ2V0UXVhZEtleSA9IGZ1bmN0aW9uICggbSwgeDAsIHkwLCB4MSwgeTEgKSB7DQoJDQoJdmFyIGtleSA9ICcnOw0KCQ0KCWtleSArPSB0aGlzLnJvdW5kICggeDAsIDMgKTsNCglrZXkgKz0gdGhpcy5yb3VuZCAoIHkwLCAzICk7DQoJa2V5ICs9IHRoaXMucm91bmQgKCB4MSwgMyApOw0KCWtleSArPSB0aGlzLnJvdW5kICggeTEsIDMgKTsNCglrZXkgKz0gdGhpcy5yb3VuZCAoIG0uYSwgMyApOw0KCWtleSArPSB0aGlzLnJvdW5kICggbS5iLCAzICk7DQoJa2V5ICs9IHRoaXMucm91bmQgKCBtLmMsIDMgKTsNCglrZXkgKz0gdGhpcy5yb3VuZCAoIG0uZCwgMyApOw0KCWtleSArPSB0aGlzLnJvdW5kICggbS50eCwgMyApOw0KCWtleSArPSB0aGlzLnJvdW5kICggbS50eSwgMyApOw0KCQ0KCXJldHVybiBrZXk7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpTcHJpdGVEZWNrQnVpbGRlci5wcm90b3R5cGUubWFrZVNjcmVlblF1YWQgPSBmdW5jdGlvbiAoIG0sIHgwLCB5MCwgeDEsIHkxLCB4T2ZmLCB5T2ZmICkgew0KCQ0KCXZhciBzY3JlZW5RdWFkID0gbmV3IEx1YVRhYmxlICgpOw0KCQ0KCWlmICggbS5iICYmIG0uYyApIHsJCQ0KCQlzY3JlZW5RdWFkLnNldCAoICd2MCcsIHRoaXMubmV3THVhVmVydCAoIG0sIHgwLCB5MSwgeE9mZiwgeU9mZiApKTsNCgkJc2NyZWVuUXVhZC5zZXQgKCAndjEnLCB0aGlzLm5ld0x1YVZlcnQgKCBtLCB4MSwgeTEsIHhPZmYsIHlPZmYgKSk7DQoJCXNjcmVlblF1YWQuc2V0ICggJ3YyJywgdGhpcy5uZXdMdWFWZXJ0ICggbSwgeDEsIHkwLCB4T2ZmLCB5T2ZmICkpOw0KCQlzY3JlZW5RdWFkLnNldCAoICd2MycsIHRoaXMubmV3THVhVmVydCAoIG0sIHgwLCB5MCwgeE9mZiwgeU9mZiApKTsNCgl9DQoJZWxzZSB7DQoJCXNjcmVlblF1YWQuc2V0ICggJ3gwJywgdGhpcy5yb3VuZCAoKCB4MCAqIG0uYSApICsgeE9mZiArIG0udHgsIDMgKSk7DQoJCXNjcmVlblF1YWQuc2V0ICggJ3kwJywgdGhpcy5yb3VuZCAoKCB5MCAqIG0uZCApICsgeU9mZiArIG0udHksIDMgKSk7DQoJCXNjcmVlblF1YWQuc2V0ICggJ3gxJywgdGhpcy5yb3VuZCAoKCB4MSAqIG0uYSApICsgeE9mZiArIG0udHgsIDMgKSk7DQoJCXNjcmVlblF1YWQuc2V0ICggJ3kxJywgdGhpcy5yb3VuZCAoKCB5MSAqIG0uZCApICsgeU9mZiArIG0udHksIDMgKSk7DQoJfQ0KCXJldHVybiBzY3JlZW5RdWFkOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KU3ByaXRlRGVja0J1aWxkZXIucHJvdG90eXBlLm5ld0x1YVZlcnQgPSBmdW5jdGlvbiAoIG1hdHJpeCwgeCwgeSwgeE9mZiwgeU9mZiApIHsNCgkNCgl2YXIgdgk9IHt9Ow0KCXYueAkJPSB4Ow0KCXYueQkJPSB5Ow0KCXRoaXMudHJhbnNmb3JtVmVydGV4ICggbWF0cml4LCB2ICk7DQoJDQoJdmFyIGx1YVZlcnQgPSBuZXcgTHVhVGFibGUgKCk7DQoJbHVhVmVydC5zZXQgKCAneCcsIHRoaXMucm91bmQgKCB2LnggKyB4T2ZmLCAzICkpOw0KCWx1YVZlcnQuc2V0ICggJ3knLCB0aGlzLnJvdW5kICggdi55ICsgeU9mZiwgMyApKTsNCgkNCglyZXR1cm4gbHVhVmVydDsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NClNwcml0ZURlY2tCdWlsZGVyLnByb3RvdHlwZS5yb3VuZCA9IGZ1bmN0aW9uICggbiwgcCApIHsNCg0KCXZhciBzID0gMTsJDQoJaWYgKCBwID4gMCApIHsNCgkJcyA9IDEwOw0KCQlmb3IgKCB2YXIgaSA9IDE7IGkgPCBwOyArK2kgKSB7DQoJCQlzICo9IDEwOw0KCQl9DQoJfQ0KCXJldHVybiBNYXRoLmZsb29yICggbiAqIHMgKSAvIHM7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpTcHJpdGVEZWNrQnVpbGRlci5wcm90b3R5cGUudHJhbnNmb3JtVmVydGV4ID0gZnVuY3Rpb24gKCBtYXRyaXgsIHZlcnRleCApIHsNCgkNCgl2YXIgeCA9IHZlcnRleC54Ow0KCXZhciB5ID0gdmVydGV4Lnk7DQoJDQoJdmVydGV4LnggPSAoIHggKiBtYXRyaXguYSApICsgKCB5ICogbWF0cml4LmMgKSArIG1hdHJpeC50eDsNCgl2ZXJ0ZXgueSA9ICggeCAqIG1hdHJpeC5iICkgKyAoIHkgKiBtYXRyaXguZCApICsgbWF0cml4LnR5Ow0KfQ0KDQrvu78vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KLy8gQ29weXJpZ2h0IChjKSAyMDEwLTIwMTEgWmlwbGluZSBHYW1lcywgSW5jLiANCi8vIEFsbCBSaWdodHMgUmVzZXJ2ZWQuIA0KLy8gaHR0cDovL2dldG1vYWkuY29tDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KDQovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLw0KLy8gVGV4dHVyZUF0bGFzDQovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLw0KZnVuY3Rpb24gVGV4dHVyZUF0bGFzICggcGFkZGluZywgZm9yY2VTcXVhcmUgKSB7DQoNCgl0aGlzLnBhZGRpbmcgPSBwYWRkaW5nOw0KCXRoaXMuZm9yY2VTcXVhcmUgPSBmb3JjZVNxdWFyZTsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NCi8qDQpUZXh0dXJlQXRsYXMucHJvdG90eXBlLmFkZFJlY3QgPSBmdW5jdGlvbiAoIGxpc3QsIG5hbWUsIHdpZHRoLCBoZWlnaHQgKSB7DQoNCgl2YXIgcmVjdCA9IHt9Ow0KCQ0KCWlmICggaGVpZ2h0ID4gd2lkdGggKSB7DQoJCXJlY3Qud2lkdGggPSBoZWlnaHQ7DQoJCXJlY3QuaGVpZ2h0ID0gd2lkdGg7DQoJCXJlY3QuaXNSb3RhdGVkID0gdHJ1ZTsNCgl9DQoJZWxzZSB7DQoJCXJlY3Qud2lkdGggPSB3aWR0aDsNCgkJcmVjdC5oZWlnaHQgPSBoZWlnaHQ7DQoJfQ0KCQ0KCXJlY3QubmFtZSA9IG5hbWU7DQoJbGlzdC5wdXNoICggcmVjdCApOw0KCQ0KCXJldHVybiByZWN0Ow0KfQ0KKi8NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NClRleHR1cmVBdGxhcy5wcm90b3R5cGUuY3JlYXRlTHVhQnJ1c2hEZWNrID0gZnVuY3Rpb24gKCkgew0KDQoJdmFyIGx1YSA9IG5ldyBMdWFUYWJsZSAoKTsNCgkNCglmb3IgKCB2YXIgaSA9IDA7IGkgPCB0aGlzLmVudHJpZXMubGVuZ3RoOyBpKysgKSB7DQoJCXZhciBlbnRyeSA9IHRoaXMuZW50cmllcyBbIGkgXTsNCgkJdmFyIHV2UmVjdCA9IGVudHJ5LnV2UmVjdDsNCgkJDQoJCXZhciBicnVzaCA9IGx1YS5wdXNoVGFibGUgKCk7DQoJCQ0KCQlicnVzaC5zZXQgKCAndTAnLCB1dlJlY3QueDAgKTsNCgkJYnJ1c2guc2V0ICggJ3YwJywgdXZSZWN0LnkwICk7DQoJCWJydXNoLnNldCAoICd1MScsIHV2UmVjdC54MSApOw0KCQlicnVzaC5zZXQgKCAndjEnLCB1dlJlY3QueTEgKTsNCgkJDQoJCWJydXNoLnNldCAoICd3JywgZW50cnkucGFja1JlY3Qud2lkdGggKTsNCgkJYnJ1c2guc2V0ICggJ2gnLCBlbnRyeS5wYWNrUmVjdC5oZWlnaHQgKTsNCgkJDQoJCWlmICggZW50cnkudXZSZWN0LmlzUm90YXRlZCApIHsNCgkJCWJydXNoLnNldCAoICdyJywgdHJ1ZSApOw0KCQl9DQoJfQ0KCQ0KCXJldHVybiBsdWE7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpUZXh0dXJlQXRsYXMucHJvdG90eXBlLmNyZWF0ZVRleHR1cmVBdGxhcyA9IGZ1bmN0aW9uICgpIHsNCgkNCgl2YXIgcGFja2VkID0gdGhpcy5nZXRQYWNrTGlzdEZvckxpYnJhcnkgKCk7DQoJdmFyIHNpemUgPSB0aGlzLmdldFRleHR1cmVTaXplICggcGFja2VkICk7DQoJDQoJdmFyIHhTY2FsZSA9IDEgLyBzaXplLndpZHRoOw0KCXZhciB5U2NhbGUgPSAxIC8gc2l6ZS5oZWlnaHQ7DQoJDQoJdGhpcy5lbnRyaWVzID0gcGFja2VkOw0KCXRoaXMubWFwID0ge307DQoNCglmb3IgKCB2YXIgaSA9IDA7IGkgPCBwYWNrZWQubGVuZ3RoOyArK2kgKSB7DQoJCQ0KCQl2YXIgZW50cnkgPSBwYWNrZWQgWyBpIF07DQoJCXRoaXMubWFwIFsgZW50cnkubmFtZSBdID0gZW50cnk7DQoJCWVudHJ5LmlkeCA9IGk7DQoJCQ0KCQl2YXIgdXZSZWN0ID0ge307IA0KCQkNCgkJdXZSZWN0LngwID0gZW50cnkucGFja1JlY3QueDAgKiB4U2NhbGU7DQoJCXV2UmVjdC55MCA9IGVudHJ5LnBhY2tSZWN0LnkwICogeVNjYWxlOw0KCQl1dlJlY3QueDEgPSBlbnRyeS5wYWNrUmVjdC54MSAqIHhTY2FsZTsNCgkJdXZSZWN0LnkxID0gZW50cnkucGFja1JlY3QueTEgKiB5U2NhbGU7DQoJCQ0KCQl1dlJlY3Qud2lkdGggPSBlbnRyeS5wYWNrUmVjdC53aWR0aCAqIHhTY2FsZTsNCgkJdXZSZWN0LmhlaWdodCA9IGVudHJ5LnBhY2tSZWN0LmhlaWdodCAqIHlTY2FsZTsNCgkJDQoJCXV2UmVjdC5pc1JvdGF0ZWQgPSBlbnRyeS5wYWNrUmVjdC5pc1JvdGF0ZWQ7DQoJCQ0KCQllbnRyeS51dlJlY3QgPSB1dlJlY3Q7DQoJfQ0KCXJldHVybiB0aGlzOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KVGV4dHVyZUF0bGFzLnByb3RvdHlwZS5jcmVhdGVUZXh0dXJlQXRsYXNEb2MgPSBmdW5jdGlvbiAoKSB7DQoJDQoJdmFyIGVudHJpZXMgPSB0aGlzLmVudHJpZXM7DQoJdmFyIHNpemUgPSB0aGlzLmdldFRleHR1cmVTaXplICggZW50cmllcyApOw0KCQ0KCXZhciBkb2N1bWVudCA9IGZsLmdldERvY3VtZW50RE9NICgpOw0KCXZhciBsaWJyYXJ5ID0gZG9jdW1lbnQubGlicmFyeTsNCgl2YXIgaXRlbXMgPSBsaWJyYXJ5Lml0ZW1zOw0KCQ0KCXZhciBhdGxhc0RvYyA9IGZsLmNyZWF0ZURvY3VtZW50ICgpOw0KCQ0KCWF0bGFzRG9jLndpZHRoID0gc2l6ZS53aWR0aDsNCglhdGxhc0RvYy5oZWlnaHQgPSBzaXplLmhlaWdodDsNCgkNCglmb3IgKCB2YXIgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrICkgew0KCQl2YXIgZW50cnkgPSBlbnRyaWVzIFsgaSBdOw0KCQkNCgkJdmFyIHhDZW50ZXIgPSBlbnRyeS5wYWNrUmVjdC54MCArICggZW50cnkucGFja1JlY3Qud2lkdGggKiAwLjUgKTsNCgkJdmFyIHlDZW50ZXIgPSBlbnRyeS5wYWNrUmVjdC55MCArICggZW50cnkucGFja1JlY3QuaGVpZ2h0ICogMC41ICk7DQoJCQ0KCQl2YXIgaWR4ID0gbGlicmFyeS5maW5kSXRlbUluZGV4ICggZW50cnkubmFtZSApOw0KCQl2YXIgaXRlbSA9IGxpYnJhcnkuaXRlbXMgWyBpZHggXTsNCgkJDQoJCWF0bGFzRG9jLmFkZEl0ZW0gKHsgeDowLCB5OjAgfSwgaXRlbSApOw0KCQkNCgkJdmFyIGVsZW1lbnQgPSBhdGxhc0RvYy5zZWxlY3Rpb24gWyAwIF07DQoJCQ0KCQllbGVtZW50LnggPSB4Q2VudGVyOw0KCQllbGVtZW50LnkgPSB5Q2VudGVyOw0KCQkNCgkJLy8gYWNjb3VudCBmb3IgZWxlbWVudHMgdy8gb2ZmLWNlbnRlciByZWdpc3RyYXRpb24gcG9pbnRzDQoJCWVsZW1lbnQueCA9IHhDZW50ZXIgLSAoKCBlbGVtZW50LndpZHRoICogMC41ICkgLSBlbnRyeS5tb2RlbFJlY3QueCApOw0KCQllbGVtZW50LnkgPSB5Q2VudGVyIC0gKCggZWxlbWVudC5oZWlnaHQgKiAwLjUgKSAtIGVudHJ5Lm1vZGVsUmVjdC55ICk7DQoJCQ0KCQlpZiAoIGVudHJ5LnBhY2tSZWN0LmlzUm90YXRlZCApIHsNCgkJCWVsZW1lbnQuc2V0VHJhbnNmb3JtYXRpb25Qb2ludCAoew0KCQkJCXg6KCggZWxlbWVudC53aWR0aCAqIDAuNSApIC0gZW50cnkubW9kZWxSZWN0LnggKSwNCgkJCQl5OigoIGVsZW1lbnQuaGVpZ2h0ICogMC41ICkgLSBlbnRyeS5tb2RlbFJlY3QueSApDQoJCQl9KTsNCgkJCWVsZW1lbnQucm90YXRpb24gPSA5MDsNCgkJfQ0KCX0NCgkNCglyZXR1cm4gYXRsYXNEb2M7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpUZXh0dXJlQXRsYXMucHJvdG90eXBlLmdldEJhc2VIZWlnaHQgPSBmdW5jdGlvbiAoIHNreWxpbmUsIGksIHdpZHRoICkgew0KDQoJdmFyIHNwYW4gPSBza3lsaW5lIFsgaSsrIF07DQoJDQoJdmFyIHgxID0gc3Bhbi54MCArIHdpZHRoOw0KCXZhciB5MCA9IHNwYW4ueTsNCgkNCglmb3IgKCA7IGkgPCBza3lsaW5lLmxlbmd0aDsgKytpICkgew0KCQlzcGFuID0gc2t5bGluZSBbIGkgXTsNCgkJDQoJCS8vIGRvbmUgY2hlY2tpbmcgc3BhbnMNCgkJaWYgKCBzcGFuLngwID49IHgxICkgew0KCQkJYnJlYWs7DQoJCX0NCgkJDQoJCS8vIHNwYW4gaXMgYWJvdmUgcmVjdCBiYXNlDQoJCWlmICggc3Bhbi55ID4geTAgKSB7DQoJCQl5MCA9IHNwYW4ueTsNCgkJfQ0KCX0NCglyZXR1cm4geTA7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQovLyBUaGlzIGdlbmVyYXRlcyBhIGxpc3Qgb2YgcGFja2VkIGVudHJpZXMgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnQncyBsaWJyYXJ5Lg0KVGV4dHVyZUF0bGFzLnByb3RvdHlwZS5nZXRQYWNrTGlzdEZvckxpYnJhcnkgPSBmdW5jdGlvbiAoKSB7DQoNCgl2YXIgcGFkZGluZyA9IHRoaXMucGFkZGluZzsNCgl2YXIgZ3V0dGVyID0gcGFkZGluZyAqIDI7DQoNCgl2YXIgbGlzdCA9IG5ldyBBcnJheSAoKTsNCgkNCgl2YXIgZG9jdW1lbnQgPSBmbC5nZXREb2N1bWVudERPTSAoKTsNCgl2YXIgbGlicmFyeSA9IGRvY3VtZW50LmxpYnJhcnk7DQoJdmFyIGl0ZW1zID0gbGlicmFyeS5pdGVtczsNCgkNCgl2YXIgc2NyYXRjaERvYyA9IGZsLmNyZWF0ZURvY3VtZW50ICgpOw0KCQ0KCWZvciAoIHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrICkgew0KCQl2YXIgaXRlbSA9IGl0ZW1zIFsgaSBdOw0KCQkNCgkJaWYgKCBpdGVtLml0ZW1UeXBlICE9ICdncmFwaGljJyApIGNvbnRpbnVlOw0KCQkNCgkJc2NyYXRjaERvYy5hZGRJdGVtICh7IHg6MCwgeTowIH0sIGl0ZW0gKTsNCgkJDQoJCXZhciB0aW1lbGluZSA9IHNjcmF0Y2hEb2MuZ2V0VGltZWxpbmUgKCk7DQoJCXZhciBsYXllciA9IHRpbWVsaW5lLmxheWVycyBbIDAgXTsNCgkJdmFyIGZyYW1lID0gbGF5ZXIuZnJhbWVzIFsgMCBdOw0KCQl2YXIgZWxlbWVudCA9IGZyYW1lLmVsZW1lbnRzIFsgMCBdOw0KCQkNCgkJZWxlbWVudC54ID0gMDsNCgkJZWxlbWVudC55ID0gMDsNCgkJDQoJCXZhciB3aWR0aCA9IGVsZW1lbnQud2lkdGg7DQoJCXZhciBoZWlnaHQgPSBlbGVtZW50LmhlaWdodDsNCgkJDQoJCXZhciBlbnRyeSA9IHt9Ow0KCQllbnRyeS5uYW1lID0gaXRlbS5uYW1lOw0KCQkNCgkJZW50cnkubW9kZWxSZWN0ID0ge307IA0KCQkNCgkJZW50cnkubW9kZWxSZWN0LndpZHRoID0gd2lkdGg7DQoJCWVudHJ5Lm1vZGVsUmVjdC5oZWlnaHQgPSBoZWlnaHQ7DQoJCQ0KCQllbnRyeS5tb2RlbFJlY3QueCA9IGVsZW1lbnQueCAtIGVsZW1lbnQubGVmdDsNCgkJZW50cnkubW9kZWxSZWN0LnkgPSBlbGVtZW50LnkgLSBlbGVtZW50LnRvcDsNCgkJDQoJCWVudHJ5Lm1vZGVsUmVjdC54MCA9IGVsZW1lbnQubGVmdDsNCgkJZW50cnkubW9kZWxSZWN0LnkwID0gZWxlbWVudC50b3A7DQoJCWVudHJ5Lm1vZGVsUmVjdC54MSA9IGVsZW1lbnQubGVmdCArIGVsZW1lbnQud2lkdGg7DQoJCWVudHJ5Lm1vZGVsUmVjdC55MSA9IGVsZW1lbnQudG9wICsgZWxlbWVudC5oZWlnaHQ7DQoJCQ0KCQllbnRyeS5wYWNrUmVjdCA9IHt9OyANCgkJDQoJCWlmICggaGVpZ2h0ID4gd2lkdGggKSB7DQoJCQ0KCQkJZW50cnkucGFja1JlY3Qud2lkdGggPSBoZWlnaHQ7DQoJCQllbnRyeS5wYWNrUmVjdC5oZWlnaHQgPSB3aWR0aDsNCgkJCQ0KCQkJZW50cnkucGFja1JlY3QuaXNSb3RhdGVkID0gdHJ1ZTsNCgkJfQ0KCQllbHNlIHsNCgkJDQoJCQllbnRyeS5wYWNrUmVjdC53aWR0aCA9IHdpZHRoOw0KCQkJZW50cnkucGFja1JlY3QuaGVpZ2h0ID0gaGVpZ2h0Ow0KCQl9DQoJCQ0KCQkvLyBzdG9yZSB0aGUgb3JpZ2luYWwgd2lkdGggYW5kIGhlaWdodA0KCQllbnRyeS5wYWNrUmVjdC5vcmlnaW5hbFdpZHRoID0gZW50cnkucGFja1JlY3Qud2lkdGg7DQoJCWVudHJ5LnBhY2tSZWN0Lm9yaWdpbmFsSGVpZ2h0ID0gZW50cnkucGFja1JlY3QuaGVpZ2h0Ow0KCQkNCgkJLy8gcGFkIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IHRvIGEgcGl4ZWwgYm91bmRhcnkNCgkJZW50cnkucGFja1JlY3Qud2lkdGggPSBNYXRoLmNlaWwgKCBlbnRyeS5wYWNrUmVjdC53aWR0aCApICsgZ3V0dGVyOw0KCQllbnRyeS5wYWNrUmVjdC5oZWlnaHQgPSBNYXRoLmNlaWwgKCBlbnRyeS5wYWNrUmVjdC5oZWlnaHQgKSArIGd1dHRlcjsNCgkJDQoJCWxpc3QucHVzaCAoIGVudHJ5ICk7DQoJCQ0KCQlzY3JhdGNoRG9jLnNlbGVjdEFsbCAoKTsNCgkJc2NyYXRjaERvYy5kZWxldGVTZWxlY3Rpb24gKCk7DQoJfQ0KCQ0KCWZsLmNsb3NlRG9jdW1lbnQgKCBzY3JhdGNoRG9jLCBmYWxzZSApOw0KCQ0KCS8vIHBhY2sgdGhlIGVudHJpZXMNCgl2YXIgbGlzdDEgPSB0aGlzLnBhY2tSZWN0c05vU29ydCAoIGxpc3QgKTsNCgl2YXIgbGlzdDIgPSB0aGlzLnBhY2tSZWN0c1NvcnQgKCBsaXN0ICk7DQoJaWYgKCBsaXN0MS50ZXh0dXJlU2l6ZSA+IGxpc3QyLnRleHR1cmVTaXplICkgew0KCQlsaXN0ID0gbGlzdDI7DQoJfQ0KCWVsc2Ugew0KCQlsaXN0ID0gbGlzdDE7DQoJfQ0KCQ0KCS8vIHJlbW92ZSB0aGUgcGFkZGluZyBhbmQgYWRqdXN0IHRoZSBmaW5hbCByZWN0DQoJZm9yICggdmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKyApIHsNCgkJdmFyIGVudHJ5ID0gbGlzdCBbIGkgXTsNCgkJDQoJCS8vIHJlc3RvcmUgdGhlIG9yaWdpbmFsIGRpbWVuc2lvbnMgDQoJCWVudHJ5LnBhY2tSZWN0LndpZHRoID0gZW50cnkucGFja1JlY3Qub3JpZ2luYWxXaWR0aDsNCgkJZW50cnkucGFja1JlY3QuaGVpZ2h0ID0gZW50cnkucGFja1JlY3Qub3JpZ2luYWxIZWlnaHQ7DQoJCQ0KCQkvLyBjbGVhciBvdXQgdGhlIHRlbXAgdmFyaWFibGVzDQoJCWVudHJ5LnBhY2tSZWN0Lm9yaWdpbmFsV2lkdGggPSBudWxsOw0KCQllbnRyeS5wYWNrUmVjdC5vcmlnaW5hbEhlaWdodCA9IG51bGw7DQoJCQ0KCQkvLyBvZmZzZXQgdGhlIHJlY3QNCgkJZW50cnkucGFja1JlY3QueDAgKz0gcGFkZGluZzsNCgkJZW50cnkucGFja1JlY3QueTAgKz0gcGFkZGluZzsNCgkJDQoJCS8vIHNldCB1cCB0aGUgbWF4IGRpbWVuc2lvbnMNCgkJZW50cnkucGFja1JlY3QueDEgPSBlbnRyeS5wYWNrUmVjdC54MCArZW50cnkucGFja1JlY3Qud2lkdGg7DQoJCWVudHJ5LnBhY2tSZWN0LnkxID0gZW50cnkucGFja1JlY3QueTAgKyBlbnRyeS5wYWNrUmVjdC5oZWlnaHQ7DQoJfQ0KCXJldHVybiBsaXN0Ow0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KVGV4dHVyZUF0bGFzLnByb3RvdHlwZS5nZXRUZXh0dXJlU2l6ZSA9IGZ1bmN0aW9uICggbGlzdCApIHsNCg0KCXZhciB3aWR0aCA9IDA7DQoJdmFyIGhlaWdodCA9IDA7DQoJDQoJZm9yICggdmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSApIHsNCgkJdmFyIGVudHJ5ID0gbGlzdCBbIGkgXTsNCgkJDQoJCWlmICggZW50cnkucGFja1JlY3QueDEgPiB3aWR0aCApIHsNCgkJCXdpZHRoID0gZW50cnkucGFja1JlY3QueDE7DQoJCX0NCgkJDQoJCWlmICggZW50cnkucGFja1JlY3QueTEgPiBoZWlnaHQgKSB7DQoJCQloZWlnaHQgPSBlbnRyeS5wYWNrUmVjdC55MTsNCgkJfQ0KCX0NCgkNCgl2YXIgcG93MldpZHRoID0gMTsNCgl2YXIgcG93MkhlaWdodCA9IDE7DQoJDQoJd2hpbGUgKCBwb3cyV2lkdGggPCB3aWR0aCApIHsNCgkJcG93MldpZHRoID0gcG93MldpZHRoICogMjsNCgl9DQoJDQoJd2hpbGUgKCBwb3cySGVpZ2h0IDwgaGVpZ2h0ICkgew0KCQlwb3cySGVpZ2h0ID0gcG93MkhlaWdodCAqIDI7DQoJfQ0KCQ0KCWlmICggdGhpcy5mb3JjZVNxdWFyZSApIHsNCgkNCgkJaWYgKCBwb3cySGVpZ2h0IDwgcG93MldpZHRoICkgew0KCQkJcG93MkhlaWdodCA9IHBvdzJXaWR0aDsNCgkJfQ0KCQ0KCQlpZiAoIHBvdzJXaWR0aCA8IHBvdzJIZWlnaHQgKSB7DQoJCQlwb3cyV2lkdGggPSBwb3cySGVpZ2h0Ow0KCQl9DQoJfQ0KCQ0KCXZhciBzaXplID0ge307DQoJc2l6ZS53aWR0aCA9IHBvdzJXaWR0aDsNCglzaXplLmhlaWdodCA9IHBvdzJIZWlnaHQ7DQoJDQoJcmV0dXJuIHNpemU7DQp9DQoNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQpUZXh0dXJlQXRsYXMucHJvdG90eXBlLm5ld1NwYW4gPSBmdW5jdGlvbiAoIHgwLCB4MSwgeSApIHsNCg0KCXZhciBzcGFuID0ge307DQoJc3Bhbi54MCA9IHgwOw0KCXNwYW4ueDEgPSB4MTsNCglzcGFuLnkgPSB5Ow0KCQ0KCXJldHVybiBzcGFuOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KVGV4dHVyZUF0bGFzLnByb3RvdHlwZS5wYWNrUmVjdHNTb3J0ID0gZnVuY3Rpb24gKCBsaXN0ICkgew0KDQoJbGlzdC5zb3J0ICggdGhpcy5zb3J0UmVjdEJ5V2lkdGggKTsNCglsaXN0LnJldmVyc2UgKCk7DQoJDQoJdmFyIHNpemUgPSAxOw0KCQ0KCXZhciBwYWNrZWQgPSBuZXcgQXJyYXkgKCk7DQoJcGFja2VkLnRleHR1cmVTaXplID0gMDsNCgl3aGlsZSAoIHBhY2tlZC5sZW5ndGggPCBsaXN0Lmxlbmd0aCApIHsNCgkNCgkJc2l6ZSA9IHNpemUgKiAyOw0KCQkNCgkJdmFyIHNreWxpbmUgPSBuZXcgQXJyYXkgKCk7DQoJCXNreWxpbmUucHVzaCAoIHRoaXMubmV3U3BhbiAoIDAsIHNpemUsIDAgKSk7DQoJCQ0KCQlmb3IgKCB2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpICkgew0KCQkJdmFyIGVudHJ5ID0gbGlzdCBbIGkgXTsNCgkJCQ0KCQkJaWYgKCAhdGhpcy5wbGFjZVJlY3QgKCBza3lsaW5lLCBlbnRyeSwgc2l6ZSApKSB7DQoJCQkJcGFja2VkID0gbmV3IEFycmF5ICgpOw0KCQkJCWJyZWFrOw0KCQkJfQ0KCQkJc2t5bGluZSA9IHRoaXMucmVidWlsZFRleHR1cmVBdGxhcyAoIHNreWxpbmUsIGVudHJ5ICk7DQoJCQlwYWNrZWQucHVzaCAoIGVudHJ5ICk7DQoJCX0NCgl9DQoJDQoJcGFja2VkLnRleHR1cmVTaXplID0gc2l6ZTsNCglyZXR1cm4gcGFja2VkOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KVGV4dHVyZUF0bGFzLnByb3RvdHlwZS5wYWNrUmVjdHNOb1NvcnQgPSBmdW5jdGlvbiAoIGxpc3QgKSB7DQoNCglsaXN0LnJldmVyc2UgKCk7DQoJDQoJdmFyIHNpemUgPSAxOw0KCQ0KCXZhciBwYWNrZWQgPSBuZXcgQXJyYXkgKCk7DQoJcGFja2VkLnRleHR1cmVTaXplID0gMDsNCgl3aGlsZSAoIHBhY2tlZC5sZW5ndGggPCBsaXN0Lmxlbmd0aCApIHsNCgkNCgkJc2l6ZSA9IHNpemUgKiAyOw0KCQkNCgkJdmFyIHNreWxpbmUgPSBuZXcgQXJyYXkgKCk7DQoJCXNreWxpbmUucHVzaCAoIHRoaXMubmV3U3BhbiAoIDAsIHNpemUsIDAgKSk7DQoJCQ0KCQlmb3IgKCB2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpICkgew0KCQkJdmFyIGVudHJ5ID0gZXZhbCh1bmV2YWwobGlzdCBbIGkgXSkpOw0KCQkJDQoJCQlpZiAoICF0aGlzLnBsYWNlUmVjdCAoIHNreWxpbmUsIGVudHJ5LCBzaXplICkpIHsNCgkJCQlwYWNrZWQgPSBuZXcgQXJyYXkgKCk7DQoJCQkJYnJlYWs7DQoJCQl9DQoJCQlza3lsaW5lID0gdGhpcy5yZWJ1aWxkVGV4dHVyZUF0bGFzICggc2t5bGluZSwgZW50cnkgKTsNCgkJCXBhY2tlZC5wdXNoICggZW50cnkgKTsNCgkJfQ0KCX0NCgkNCglsaXN0LnJldmVyc2UgKCk7DQoJcGFja2VkLnRleHR1cmVTaXplID0gc2l6ZTsNCglyZXR1cm4gcGFja2VkOw0KfQ0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vLw0KVGV4dHVyZUF0bGFzLnByb3RvdHlwZS5wbGFjZVJlY3QgPSBmdW5jdGlvbiAoIHNreWxpbmUsIGVudHJ5LCBzaXplICkgew0KCQ0KCXZhciBiaWFzID0gNDsNCgkNCgl2YXIgYmVzdFggPSAwOw0KCXZhciBiZXN0WSA9IHRoaXMuZ2V0QmFzZUhlaWdodCAoIHNreWxpbmUsIDAsIGVudHJ5LnBhY2tSZWN0LndpZHRoICk7DQoJDQoJZm9yICggaSA9IDE7IGkgPCBza3lsaW5lLmxlbmd0aDsgKytpICkgew0KCQl2YXIgc3BhbiA9IHNreWxpbmUgWyBpIF07DQoJCQ0KCQlpZiAoKCBzcGFuLngwICsgZW50cnkucGFja1JlY3Qud2lkdGggKSA+IHNpemUgKSB7DQoJCQlicmVhazsNCgkJfQ0KCQkNCgkJdmFyIHkgPSB0aGlzLmdldEJhc2VIZWlnaHQgKCBza3lsaW5lLCBpLCBlbnRyeS5wYWNrUmVjdC53aWR0aCApOw0KCQkNCgkJaWYgKCB5IDwgKCBiZXN0WSAtIGJpYXMgKSkgew0KCQkJYmVzdFggPSBzcGFuLngwOw0KCQkJYmVzdFkgPSB5Ow0KCQl9DQoJfQ0KCQ0KCWlmICgoIGJlc3RYICsgZW50cnkucGFja1JlY3Qud2lkdGggKSA+IHNpemUgKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9DQoJaWYgKCggYmVzdFkgKyBlbnRyeS5wYWNrUmVjdC5oZWlnaHQgKSA+IHNpemUgKSB7DQoJCXJldHVybiBmYWxzZTsNCgl9CQ0KCWVudHJ5LnBhY2tSZWN0LngwID0gYmVzdFg7DQoJZW50cnkucGFja1JlY3QueTAgPSBiZXN0WTsNCgllbnRyeS5wYWNrUmVjdC54MSA9IGVudHJ5LnBhY2tSZWN0LngwICsgZW50cnkucGFja1JlY3Qud2lkdGg7DQoJZW50cnkucGFja1JlY3QueTEgPSBlbnRyeS5wYWNrUmVjdC55MCArIGVudHJ5LnBhY2tSZWN0LmhlaWdodDsNCgkNCglyZXR1cm4gdHJ1ZTsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NClRleHR1cmVBdGxhcy5wcm90b3R5cGUucmVidWlsZFRleHR1cmVBdGxhcyA9IGZ1bmN0aW9uICggbGlzdCwgZW50cnkgKSB7DQoJDQoJdmFyIGkgPSAwOw0KCXZhciB0ZW1wID0gbmV3IEFycmF5ICgpOw0KCQ0KCWZvciAoIDsgaSA8IGxpc3QubGVuZ3RoOyArK2kgKSB7DQoJCXZhciBzcGFuID0gbGlzdCBbIGkgXTsNCgkJDQoJCWlmICggc3Bhbi54MSA8PSBlbnRyeS5wYWNrUmVjdC54MCApIHsNCgkJCXRlbXAucHVzaCAoIHNwYW4gKTsNCgkJfQ0KCQllbHNlIGlmICggc3Bhbi54MSA+IGVudHJ5LnBhY2tSZWN0LngwICkgew0KCQkNCgkJCWlmICggc3Bhbi54MCA8IGVudHJ5LnBhY2tSZWN0LngwICkgew0KCQkJCXRlbXAucHVzaCAoIHRoaXMubmV3U3BhbiAoIHNwYW4ueDAsIGVudHJ5LnBhY2tSZWN0LngwLCBzcGFuLnkgKSk7DQoJCQl9DQoJCQkNCgkJCXRlbXAucHVzaCAoIHRoaXMubmV3U3BhbiAoIGVudHJ5LnBhY2tSZWN0LngwLCBlbnRyeS5wYWNrUmVjdC54MSwgZW50cnkucGFja1JlY3QueTEgKSk7CQkJDQoJCQlicmVhazsNCgkJfQ0KCX0NCgkNCglmb3IgKCA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpICkgew0KCQl2YXIgc3BhbiA9IGxpc3QgWyBpIF07DQoJCQ0KCQlpZiAoIHNwYW4ueDAgPj0gZW50cnkucGFja1JlY3QueDEgKSB7DQoJCQl0ZW1wLnB1c2ggKCBzcGFuICk7DQoJCX0NCgkJZWxzZSBpZiAoIHNwYW4ueDEgPiBlbnRyeS5wYWNrUmVjdC54MSApIHsNCgkJCXRlbXAucHVzaCAoIHRoaXMubmV3U3BhbiAoIGVudHJ5LnBhY2tSZWN0LngxLCBzcGFuLngxLCBzcGFuLnkgKSk7DQoJCX0NCgl9DQoJDQoJdmFyIHNreWxpbmUgPSBuZXcgQXJyYXkgKCk7DQoJdmFyIHByZXZTcGFuOw0KCQ0KCWZvciAoIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7ICsraSApIHsNCgkJdmFyIHNwYW4gPSB0ZW1wIFsgaSBdOw0KCQkNCgkJaWYgKCggcHJldlNwYW4gKSAmJiAoIHByZXZTcGFuLnkgPT0gc3Bhbi55ICkpIHsNCgkJCXByZXZTcGFuLngxID0gc3Bhbi54MTsNCgkJfQ0KCQllbHNlIHsNCgkJCXNreWxpbmUucHVzaCAoIHNwYW4gKTsNCgkJCXByZXZTcGFuID0gc3BhbjsNCgkJfQ0KCX0NCglyZXR1cm4gc2t5bGluZTsNCn0NCg0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8NClRleHR1cmVBdGxhcy5wcm90b3R5cGUuc29ydFJlY3RCeVdpZHRoID0gZnVuY3Rpb24gKCBhLCBiICkgew0KDQoJaWYgKCBhLnBhY2tSZWN0LndpZHRoID09IGIucGFja1JlY3Qud2lkdGggKSByZXR1cm4gMDsNCglyZXR1cm4gYS5wYWNrUmVjdC53aWR0aCA8IGIucGFja1JlY3Qud2lkdGggPyAtMSA6IDE7DQp9DQo=";